<template>
    <div class="flex flex-col">
        <div v-if="isAdmin" class="flex flex-row gap-4 mb-4">
            <div class="card w-1/2 flex flex-row">
                <div class="w-1/2">
                    <p class="font-bold text-xl">Map Editor</p>
                    <div class="font-semibold text-lg mb-2">Admin Detail</div>
                    <p>Nama : {{ teamName }}</p>
                    <p>ID: {{ uid }}</p>
                    <p>Ruang: {{ ruang }}</p>
                </div>
                <div class="w-1/2">
                    <div class="mb-2 mt-2">
                        <label for="room" class="block text-lg">Select Room to Show</label>
                        <Select id="room" :options="rooms" scrollHeight="230px" optionLabel="name"
                            class="w-full md:w-[15rem]" showClear placeholder="Pilih Ruangan" v-model="selectedRoom" />
                    </div>
                    <Button v-if="selectedRoom" class="mr-2 mb-2" label="RESET MAP" @click="openConfirmation"
                        severity="danger" />
                    <Dialog header="Confirmation" v-model:visible="displayConfirmation" :style="{ width: '350px' }"
                        :modal="true">
                        <div class="flex items-center justify-center">
                            <i class="pi pi-exclamation-triangle mr-4" style="font-size: 2rem" />
                            <span>Are you sure you want to reset the map? This action cannot be undone.</span>
                        </div>
                        <template #footer>
                            <Button label="No" icon="pi pi-times" @click="closeConfirmation" text
                                severity="secondary" />
                            <Button label="Yes" icon="pi pi-check" @click="confirmReset" severity="danger" outlined
                                autofocus />
                        </template>
                    </Dialog>
                    <Button :label="isFrozen ? 'Unfreeze Map' : 'Freeze Map'"
                        :icon="isFrozen ? 'pi pi-lock-open' : 'pi pi-lock'" @click="toggleMapFreeze" v-if="selectedRoom"
                        class="p-button mr-2" :severity="isFrozen ? 'warn' : 'info'" />
                </div>

            </div>

            <div v-if="selectedRoom" class="card w-1/2 h-full">

                <p class="text-lg">Change Attributes</p>
                <p v-if="!clickedArea">klik salah satu wilayah di map bawah dulu deh</p>

                <div v-else class="flex flex-col gap-2">
                    <p class="font-bold" v-if="clickedArea">Selected Area: {{ clickedArea }}</p>

                    <div class="flex flex-row justify-left gap-2 items-center">
                        <p>Pilih Warna: </p>
                        <!-- ["#ef476f", "#f78c6b", "#ffd166", "#06d6a0", "#118ab2", "#073b4c"]; -->
                        <button class="colorbtn A" @click="updateColor('rgba(239, 71, 111, 1)')"> </button>
                        <button class="colorbtn B" @click="updateColor('rgba(247, 140, 107, 1)')"> </button>
                        <button class="colorbtn C" @click="updateColor('rgba(255, 209, 102, 1)')"> </button>
                        <button class="colorbtn D" @click="updateColor('rgba(6, 214, 160, 1)')"></button>
                        <button class="colorbtn E" @click="updateColor('rgba(17, 138, 178, 1)')"></button>
                        <button class="colorbtn F" @click="updateColor('rgba(7, 59, 76, 1)')"></button>
                    </div>
                    <div>
                        <Button class="w-[5rem] mr-2" label="Freeze" @click="freezeArea()" severity="info"></Button>
                        <Button class="w-[5rem] mr-2" label="Unfreeze" @click="unfreezeArea()" severity="warn"></Button>
                    </div>
                    <div>
                        <InputNumber v-model="setWilayahAmount" class="w-[15rem] mr-2" />
                        <Button label="set poin wilayah" @click="setPointWilayah"></Button>
                    </div>

                    <div>
                        <InputNumber v-model="setTroopsAmount" class="w-[15rem] mr-2" />
                        <Button label="set poin troops" @click="setPoinTroops"></Button>
                    </div>

                </div>
            </div>
        </div>


        <div class="card" v-if="(!isAdmin && mapState) || (isAdmin && selectedRoom && mapState)">
            <div class="text-lg font-bold mb-4">
                <p>Map View
                    <span v-if="!isAdmin">- Ruang {{ ruang }}</span>
                    <span v-else>- Admin Mode ({{ selectedRoom.name }})</span>
                </p>
            </div>

            <div class="map-container flex justify-center"
                style="width: 100%; height: 80vh; overflow: hidden; border-radius: 1rem; border: 2px solid grey; background-color: white;">
                <div v-if="mapState.mapFrozen && !isAdmin"
                    class="top-0 left-0 w-full h-full bg-black bg-opacity-50 flex justify-center items-center">
                    <div class="text-white text-2xl font-bold">Map Frozen</div>
                </div>
                <svg v-else ref="svgMap" id="mapSvg" class="w-full h-full"
                    :style="{ backgroundColor: isAdmin && isFrozen ? 'lightblue' : 'white' }" viewBox="0 0 2100 2100"
                    fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path id="E1" class="map-area" :fill="mapState.E1?.color || 'grey'" style="cursor: pointer;"
                        @click="handleSVGClick('E1')"
                        d="M600.437 1243.44C606.688 1251.04 613.142 1262.86 620.066 1274.73C626.525 1285.8 626.703 1293.94 626.87 1301.62C627.072 1310.86 627.26 1319.44 638.364 1331.66C645.915 1339.96 650.381 1351.35 655.198 1363.64C663.354 1384.44 672.518 1407.81 699.358 1423.15C715.64 1432.45 728.079 1433.47 739.944 1434.45C753.391 1435.56 766.101 1436.61 782.835 1449.58C815.765 1426.99 829.735 1401.42 843.359 1376.49C854.524 1356.05 865.457 1336.04 886.404 1318.44C904.702 1231.02 949.43 1162.91 949.43 1162.91C927.278 1162.91 915.823 1139.84 910.082 1115.37L823.377 1134.44L778.649 1183.24L719.689 1219.83H652.596L600.437 1243.44Z"
                        fill="#118AB2" stroke="black" stroke-width="3" />
                    <path id="E2" class="map-area" :fill="mapState.E2?.color || 'grey'" style="cursor: pointer;"
                        @click="handleSVGClick('E2')"
                        d="M500.113 1040.04V1112.08L550.94 1209.67L591.603 1248.3L652.596 1219.83H719.689L778.649 1183.24L823.377 1134.44L910.082 1115.37C905.812 1097.17 904.702 1078.19 904.702 1067.35C871.671 1064 840.691 1060.49 810.968 1057.13C703.45 1044.97 612.374 1034.66 500.113 1040.04Z"
                        fill="#118AB2" stroke="black" stroke-width="3" />
                    <mask id="path-3-outside-1_98_2" maskUnits="userSpaceOnUse" x="262.097" y="1070.44" width="368"
                        height="244" fill="black">
                        <rect fill="white" x="262.097" y="1070.44" width="368" height="244" />
                        <path fill-rule="evenodd" clip-rule="evenodd"
                            d="M500.113 1078.44C497.699 1080.96 491.492 1081.49 483.596 1082.17C478.98 1082.57 473.787 1083.01 468.437 1083.94C459.62 1087.34 445.913 1086.47 433.24 1085.66C428.328 1085.35 423.571 1085.05 419.314 1085.01C418.117 1085 416.912 1084.99 415.701 1084.98C407.829 1084.92 399.681 1084.96 391.36 1085.74C390.72 1085.8 390.079 1085.87 389.437 1085.94C389.437 1085.94 339.937 1098.94 306.937 1122.94C303.125 1124.81 299.484 1128.13 296.054 1132.55C278.712 1154.86 266.763 1205.12 265.258 1237.73C264.902 1245.43 265.129 1252.15 266.004 1257.28C266.553 1260.51 267.359 1263.11 268.437 1264.94C268.437 1264.94 279.02 1270.96 278.937 1273.44C278.937 1273.44 278.937 1273.44 278.937 1273.44C279.3 1273.75 279.745 1274.05 280.242 1274.36C280.738 1274.67 281.286 1274.98 281.856 1275.31C283.459 1276.23 285.238 1277.25 286.534 1278.55L286.535 1278.55C290.021 1282.03 293.391 1285.41 294.437 1285.44C300.169 1285.61 305.707 1286.97 311.392 1288.37L311.393 1288.37C318.891 1290.21 326.644 1292.12 335.437 1291.44C362.309 1289.36 401.145 1280.47 412.624 1277.74C414.813 1277.22 417.068 1277.11 419.288 1277.48C427.37 1278.8 448.31 1282.42 462.437 1286.44C472.527 1289.31 480.236 1293.94 487.613 1298.37L487.613 1298.37C497.98 1304.6 507.692 1310.44 522.437 1310.44C553.774 1310.44 595.358 1303.31 626.712 1296.82C626.366 1290.48 625.202 1283.53 620.066 1274.73C613.142 1262.86 605.365 1252.39 599.115 1244.79L591.603 1248.3L550.94 1209.67L500.113 1112.08L500.113 1078.44Z" />
                    </mask>
                    <path id="E3" class="map-area" :fill="mapState.E3?.color || 'grey'" style="cursor: pointer;"
                        @click="handleSVGClick('E3')" fill-rule="evenodd" clip-rule="evenodd"
                        d="M500.113 1078.44C497.699 1080.96 491.492 1081.49 483.596 1082.17C478.98 1082.57 473.787 1083.01 468.437 1083.94C459.62 1087.34 445.913 1086.47 433.24 1085.66C428.328 1085.35 423.571 1085.05 419.314 1085.01C418.117 1085 416.912 1084.99 415.701 1084.98C407.829 1084.92 399.681 1084.96 391.36 1085.74C390.72 1085.8 390.079 1085.87 389.437 1085.94C389.437 1085.94 339.937 1098.94 306.937 1122.94C303.125 1124.81 299.484 1128.13 296.054 1132.55C278.712 1154.86 266.763 1205.12 265.258 1237.73C264.902 1245.43 265.129 1252.15 266.004 1257.28C266.553 1260.51 267.359 1263.11 268.437 1264.94C268.437 1264.94 279.02 1270.96 278.937 1273.44C278.937 1273.44 278.937 1273.44 278.937 1273.44C279.3 1273.75 279.745 1274.05 280.242 1274.36C280.738 1274.67 281.286 1274.98 281.856 1275.31C283.459 1276.23 285.238 1277.25 286.534 1278.55L286.535 1278.55C290.021 1282.03 293.391 1285.41 294.437 1285.44C300.169 1285.61 305.707 1286.97 311.392 1288.37L311.393 1288.37C318.891 1290.21 326.644 1292.12 335.437 1291.44C362.309 1289.36 401.145 1280.47 412.624 1277.74C414.813 1277.22 417.068 1277.11 419.288 1277.48C427.37 1278.8 448.31 1282.42 462.437 1286.44C472.527 1289.31 480.236 1293.94 487.613 1298.37L487.613 1298.37C497.98 1304.6 507.692 1310.44 522.437 1310.44C553.774 1310.44 595.358 1303.31 626.712 1296.82C626.366 1290.48 625.202 1283.53 620.066 1274.73C613.142 1262.86 605.365 1252.39 599.115 1244.79L591.603 1248.3L550.94 1209.67L500.113 1112.08L500.113 1078.44Z"
                        fill="#118AB2" />
                    <path
                        d="M625.371 1301.65L625.385 1302.29L628.384 1302.22L628.37 1301.59L625.371 1301.65ZM483.596 1082.17L483.852 1085.16L483.852 1085.16L483.596 1082.17ZM500.113 1078.44L503.113 1078.44L503.113 1070.96L497.944 1076.36L500.113 1078.44ZM468.437 1083.94L467.927 1080.98L467.635 1081.03L467.358 1081.14L468.437 1083.94ZM433.24 1085.66L433.43 1082.67L433.43 1082.67L433.24 1085.66ZM419.314 1085.01L419.287 1088.01L419.287 1088.01L419.314 1085.01ZM415.701 1084.98L415.723 1081.98L415.723 1081.98L415.701 1084.98ZM391.36 1085.74L391.08 1082.76L391.08 1082.76L391.36 1085.74ZM389.437 1085.94L389.116 1082.95L388.892 1082.98L388.675 1083.04L389.437 1085.94ZM306.937 1122.94L308.261 1125.63L308.493 1125.52L308.702 1125.36L306.937 1122.94ZM296.054 1132.55L293.686 1130.7L293.686 1130.7L296.054 1132.55ZM265.258 1237.73L262.261 1237.59L262.261 1237.59L265.258 1237.73ZM266.004 1257.28L268.961 1256.78L268.961 1256.78L266.004 1257.28ZM268.437 1264.94L265.853 1266.46L266.259 1267.15L266.954 1267.54L268.437 1264.94ZM278.937 1273.44L281.935 1273.55L281.935 1273.54L278.937 1273.44ZM278.937 1273.44L275.939 1273.32L275.885 1274.78L276.994 1275.72L278.937 1273.44ZM280.242 1274.36L278.655 1276.91L278.655 1276.91L280.242 1274.36ZM281.856 1275.31L283.348 1272.71L283.348 1272.71L281.856 1275.31ZM286.534 1278.55L288.746 1276.52L288.702 1276.47L288.656 1276.42L286.534 1278.55ZM286.535 1278.55L284.324 1280.57L284.368 1280.62L284.413 1280.67L286.535 1278.55ZM294.437 1285.44L294.348 1288.44L294.348 1288.44L294.437 1285.44ZM311.392 1288.37L312.341 1285.52L312.226 1285.48L312.108 1285.45L311.392 1288.37ZM311.393 1288.37L310.444 1291.21L310.559 1291.25L310.677 1291.28L311.393 1288.37ZM335.437 1291.44L335.206 1288.45L335.206 1288.45L335.437 1291.44ZM412.624 1277.74L411.93 1274.82L411.93 1274.82L412.624 1277.74ZM419.288 1277.48L418.802 1280.44L418.802 1280.44L419.288 1277.48ZM462.437 1286.44L461.616 1289.32L461.616 1289.32L462.437 1286.44ZM487.613 1298.37L486.068 1300.94L486.167 1301L486.271 1301.06L487.613 1298.37ZM487.613 1298.37L489.158 1295.8L489.058 1295.74L488.954 1295.69L487.613 1298.37ZM626.712 1296.82L627.32 1299.76L629.848 1299.24L629.708 1296.66L626.712 1296.82ZM620.066 1274.73L617.475 1276.24L617.475 1276.24L620.066 1274.73ZM599.115 1244.79L601.432 1242.89L599.954 1241.09L597.846 1242.07L599.115 1244.79ZM591.603 1248.3L589.536 1250.47L591.019 1251.88L592.871 1251.02L591.603 1248.3ZM550.94 1209.67L548.28 1211.05L548.511 1211.5L548.874 1211.84L550.94 1209.67ZM500.113 1112.08L497.113 1112.08L497.113 1112.81L497.452 1113.47L500.113 1112.08ZM483.852 1085.16C487.749 1084.83 491.444 1084.51 494.464 1083.95C497.344 1083.4 500.361 1082.52 502.281 1080.51L497.944 1076.36C497.45 1076.88 496.157 1077.52 493.356 1078.05C490.696 1078.55 487.338 1078.84 483.339 1079.18L483.852 1085.16ZM468.947 1086.89C474.152 1086 479.223 1085.56 483.852 1085.16L483.339 1079.18C478.737 1079.58 473.421 1080.03 467.927 1080.98L468.947 1086.89ZM433.05 1088.66C439.361 1089.06 446.081 1089.49 452.337 1089.38C458.556 1089.27 464.61 1088.63 469.517 1086.74L467.358 1081.14C463.447 1082.65 458.239 1083.27 452.232 1083.38C446.262 1083.48 439.792 1083.07 433.43 1082.67L433.05 1088.66ZM419.287 1088.01C423.446 1088.05 428.117 1088.35 433.05 1088.66L433.43 1082.67C428.538 1082.36 423.695 1082.05 419.342 1082.01L419.287 1088.01ZM415.679 1087.98C416.887 1087.99 418.088 1088 419.287 1088.01L419.342 1082.01C418.145 1082 416.937 1081.99 415.723 1081.98L415.679 1087.98ZM391.641 1088.73C399.801 1087.96 407.82 1087.92 415.679 1087.98L415.723 1081.98C407.837 1081.92 399.561 1081.96 391.08 1082.76L391.641 1088.73ZM389.758 1088.92C390.386 1088.85 391.014 1088.79 391.641 1088.73L391.08 1082.76C390.427 1082.82 389.772 1082.88 389.116 1082.95L389.758 1088.92ZM308.702 1125.36C324.884 1113.59 345.221 1104.46 361.625 1098.24C369.805 1095.14 376.964 1092.79 382.073 1091.21C384.627 1090.42 386.667 1089.83 388.065 1089.43C388.763 1089.23 389.301 1089.08 389.662 1088.98C389.843 1088.93 389.979 1088.9 390.069 1088.87C390.115 1088.86 390.148 1088.85 390.17 1088.85C390.181 1088.84 390.188 1088.84 390.193 1088.84C390.196 1088.84 390.198 1088.84 390.198 1088.84C390.199 1088.84 390.199 1088.84 390.199 1088.84C390.199 1088.84 390.199 1088.84 389.437 1085.94C388.675 1083.04 388.674 1083.04 388.674 1083.04C388.673 1083.04 388.672 1083.04 388.671 1083.04C388.669 1083.04 388.666 1083.04 388.663 1083.04C388.656 1083.04 388.645 1083.04 388.632 1083.05C388.606 1083.05 388.568 1083.06 388.519 1083.08C388.419 1083.1 388.274 1083.14 388.084 1083.19C387.704 1083.3 387.146 1083.45 386.427 1083.66C384.988 1084.06 382.903 1084.67 380.301 1085.48C375.098 1087.09 367.819 1089.48 359.499 1092.63C342.903 1098.92 321.99 1108.28 305.173 1120.51L308.702 1125.36ZM298.423 1134.39C301.694 1130.18 305.003 1127.23 308.261 1125.63L305.613 1120.24C301.246 1122.39 297.274 1126.09 293.686 1130.7L298.423 1134.39ZM268.254 1237.87C268.996 1221.81 272.317 1201.32 277.61 1182.07C282.923 1162.75 290.12 1145.07 298.423 1134.39L293.686 1130.7C284.646 1142.34 277.198 1160.94 271.825 1180.48C266.431 1200.1 263.025 1221.03 262.261 1237.59L268.254 1237.87ZM268.961 1256.78C268.137 1251.94 267.904 1245.46 268.254 1237.87L262.261 1237.59C261.901 1245.4 262.121 1252.35 263.046 1257.78L268.961 1256.78ZM271.021 1263.41C270.21 1262.04 269.484 1259.85 268.961 1256.78L263.046 1257.78C263.623 1261.17 264.508 1264.18 265.853 1266.46L271.021 1263.41ZM281.935 1273.54C281.979 1272.23 281.357 1271.2 280.967 1270.64C280.516 1269.99 279.941 1269.39 279.376 1268.87C278.235 1267.8 276.78 1266.72 275.42 1265.79C274.04 1264.84 272.669 1263.97 271.649 1263.35C271.137 1263.04 270.71 1262.79 270.408 1262.61C270.257 1262.52 270.138 1262.45 270.055 1262.41C270.013 1262.38 269.981 1262.36 269.958 1262.35C269.947 1262.34 269.938 1262.34 269.932 1262.34C269.928 1262.33 269.926 1262.33 269.924 1262.33C269.923 1262.33 269.922 1262.33 269.922 1262.33C269.921 1262.33 269.921 1262.33 269.921 1262.33C269.92 1262.33 269.92 1262.33 268.437 1264.94C266.954 1267.54 266.954 1267.54 266.954 1267.54C266.954 1267.54 266.953 1267.54 266.953 1267.54C266.953 1267.54 266.954 1267.54 266.954 1267.54C266.955 1267.55 266.956 1267.55 266.958 1267.55C266.962 1267.55 266.968 1267.55 266.977 1267.56C266.994 1267.57 267.021 1267.58 267.057 1267.6C267.129 1267.65 267.237 1267.71 267.375 1267.79C267.652 1267.95 268.051 1268.19 268.53 1268.48C269.492 1269.06 270.761 1269.86 272.016 1270.73C273.292 1271.61 274.466 1272.49 275.287 1273.26C275.702 1273.64 275.94 1273.92 276.052 1274.08C276.225 1274.33 275.916 1274.02 275.939 1273.34L281.935 1273.54ZM281.935 1273.55C281.935 1273.54 281.935 1273.54 281.935 1273.54C281.936 1273.53 281.936 1273.53 281.936 1273.53C281.936 1273.53 281.936 1273.53 281.936 1273.53C281.936 1273.53 281.936 1273.53 281.936 1273.53C281.936 1273.53 281.936 1273.53 281.936 1273.53C281.936 1273.53 281.936 1273.53 281.936 1273.53C281.936 1273.53 281.936 1273.53 281.936 1273.53C281.936 1273.53 281.936 1273.53 281.935 1273.54C281.935 1273.54 281.935 1273.54 281.935 1273.55L275.939 1273.32C275.939 1273.33 275.939 1273.34 275.939 1273.34C275.939 1273.34 275.939 1273.34 275.939 1273.34C275.939 1273.34 275.939 1273.34 275.939 1273.34C275.939 1273.34 275.939 1273.34 275.939 1273.34C275.939 1273.34 275.939 1273.34 275.939 1273.34C275.939 1273.34 275.939 1273.34 275.939 1273.34C275.939 1273.34 275.939 1273.34 275.939 1273.34C275.939 1273.34 275.939 1273.34 275.939 1273.34C275.939 1273.34 275.939 1273.33 275.939 1273.32L281.935 1273.55ZM281.829 1271.81C281.384 1271.54 281.08 1271.32 280.88 1271.15L276.994 1275.72C277.519 1276.17 278.105 1276.56 278.655 1276.91L281.829 1271.81ZM283.348 1272.71C282.766 1272.37 282.269 1272.09 281.829 1271.81L278.655 1276.91C279.207 1277.25 279.806 1277.59 280.365 1277.91L283.348 1272.71ZM288.656 1276.42C287.024 1274.79 284.87 1273.58 283.348 1272.71L280.365 1277.91C282.048 1278.88 283.452 1279.7 284.412 1280.67L288.656 1276.42ZM288.747 1276.52L288.746 1276.52L284.323 1280.57L284.324 1280.57L288.747 1276.52ZM294.526 1282.44C294.835 1282.45 295.055 1282.51 295.151 1282.54C295.206 1282.56 295.246 1282.58 295.269 1282.59C295.293 1282.6 295.307 1282.6 295.309 1282.61C295.31 1282.61 295.285 1282.59 295.229 1282.56C295.174 1282.52 295.102 1282.47 295.012 1282.41C294.629 1282.13 294.098 1281.69 293.421 1281.07C292.075 1279.84 290.417 1278.19 288.657 1276.43L284.413 1280.67C286.139 1282.39 287.909 1284.17 289.381 1285.51C290.114 1286.17 290.838 1286.79 291.491 1287.27C291.815 1287.5 292.184 1287.75 292.572 1287.94C292.893 1288.11 293.541 1288.41 294.348 1288.44L294.526 1282.44ZM312.108 1285.45C306.477 1284.07 300.63 1282.62 294.526 1282.44L294.348 1288.44C299.708 1288.6 304.937 1289.87 310.676 1291.28L312.108 1285.45ZM312.342 1285.52L312.341 1285.52L310.443 1291.21L310.444 1291.21L312.342 1285.52ZM335.206 1288.45C326.959 1289.08 319.651 1287.31 312.11 1285.45L310.677 1291.28C318.13 1293.11 326.329 1295.15 335.668 1294.43L335.206 1288.45ZM411.93 1274.82C400.424 1277.55 361.809 1286.39 335.206 1288.45L335.668 1294.43C362.81 1292.33 401.866 1283.38 413.318 1280.66L411.93 1274.82ZM419.774 1274.52C417.139 1274.08 414.483 1274.21 411.93 1274.82L413.318 1280.66C415.143 1280.22 416.997 1280.14 418.802 1280.44L419.774 1274.52ZM463.258 1283.55C448.943 1279.48 427.842 1275.84 419.774 1274.52L418.802 1280.44C426.899 1281.77 447.677 1285.36 461.616 1289.32L463.258 1283.55ZM489.158 1295.8C481.797 1291.38 473.777 1286.55 463.258 1283.55L461.616 1289.32C471.277 1292.07 478.676 1296.5 486.068 1300.94L489.158 1295.8ZM488.954 1295.69L488.954 1295.69L486.271 1301.06L486.271 1301.06L488.954 1295.69ZM522.437 1307.44C508.606 1307.44 499.535 1302.04 489.158 1295.8L486.068 1300.94C496.425 1307.17 506.779 1313.44 522.437 1313.44V1307.44ZM626.104 1293.88C594.766 1300.37 553.442 1307.44 522.437 1307.44V1313.44C554.106 1313.44 595.95 1306.25 627.32 1299.76L626.104 1293.88ZM617.475 1276.24C622.315 1284.54 623.39 1291 623.717 1296.99L629.708 1296.66C629.343 1289.97 628.089 1282.53 622.658 1273.22L617.475 1276.24ZM596.798 1246.7C602.973 1254.21 610.65 1264.54 617.475 1276.24L622.658 1273.22C615.634 1261.18 607.757 1250.58 601.432 1242.89L596.798 1246.7ZM592.871 1251.02L600.383 1247.51L597.846 1242.07L590.334 1245.58L592.871 1251.02ZM548.874 1211.84L589.536 1250.47L593.669 1246.12L553.007 1207.49L548.874 1211.84ZM497.452 1113.47L548.28 1211.05L553.601 1208.28L502.773 1110.69L497.452 1113.47ZM497.113 1078.44L497.113 1112.08L503.113 1112.08L503.113 1078.44L497.113 1078.44Z"
                        fill="black" mask="url(#path-3-outside-1_98_2)" />
                    <path id="E5" class="map-area" :fill="mapState.E5?.color || 'grey'" style="cursor: pointer;"
                        @click="handleSVGClick('E5')"
                        d="M501.937 1046.44L500.113 1040.04C494.741 1040.3 489.321 1040.59 483.848 1040.92C476.562 1040.53 469.288 1040.14 462.034 1039.75L462.021 1039.75C386.551 1035.7 313.279 1031.77 252.073 1031.77C237.834 1031.77 224.871 1031.71 212.688 1031.66C146.093 1031.37 102.832 1031.18 2.00194 1040.92C2.00065 1041.6 2 1042.28 2 1042.95C2 1153.28 19.1619 1259.59 50.9616 1359.37C50.7313 1358.65 50.5018 1357.92 50.2731 1357.2C154.162 1384.59 245.008 1342.12 277.487 1317.42C277.487 1317.42 279.584 1291.49 280.242 1274.36C279.745 1274.05 279.3 1273.75 278.937 1273.44C279.02 1270.96 268.437 1264.94 268.437 1264.94C256.937 1245.44 276.437 1137.94 306.937 1122.94C339.937 1098.94 389.437 1085.94 389.437 1085.94C399.71 1084.83 409.733 1084.92 419.314 1085.01C434.552 1085.15 456.203 1088.66 468.437 1083.94C482.937 1081.44 496.288 1082.44 500.113 1078.44C503.937 1074.44 501.937 1055.99 501.937 1046.44Z"
                        fill="#118AB2" stroke="black" stroke-width="3" />
                    <path id="E4" class="map-area" :fill="mapState.E4?.color || 'grey'" style="cursor: pointer;"
                        @click="handleSVGClick('E4')"
                        d="M472.338 1526.17C470.866 1529.15 469.167 1532.49 467.27 1536.14C459.497 1529.93 456.693 1526.13 454.434 1523.07L454.41 1523.04L454.392 1523.02C452.703 1520.73 451.207 1518.71 448.227 1516.46C445.281 1514.23 440.93 1511.82 433.541 1508.56C427.003 1505.69 419.632 1502.88 411.833 1499.92L411.809 1499.91L411.807 1499.91C411.806 1499.91 411.804 1499.91 411.803 1499.91C395.962 1493.88 378.292 1487.16 361.683 1477.64C353.137 1472.73 345.776 1467.91 340.753 1461.66C335.801 1455.49 333.057 1447.85 333.926 1437.14C337.92 1415.66 335.866 1401.91 329.249 1391.35C322.726 1380.94 311.881 1373.85 298.991 1365.43L298.787 1365.29C288.854 1358.8 277.583 1351.43 265.696 1341.05L261.247 1329.92C268.023 1325.97 273.782 1322.13 278.395 1318.62L279.005 1318.15L278.986 1317.39L277.487 1317.42C278.986 1317.39 278.986 1317.39 278.986 1317.39L278.986 1317.39L278.986 1317.38L278.986 1317.36L278.984 1317.29L278.977 1317.01C278.972 1316.76 278.963 1316.39 278.953 1315.92C278.932 1314.98 278.903 1313.61 278.871 1311.94C278.807 1308.59 278.73 1303.98 278.679 1298.98C278.588 1290.07 278.579 1279.93 278.863 1273.33C279.114 1273.53 279.388 1273.76 279.683 1274.02C281.149 1275.3 282.961 1277.09 284.822 1278.95C285.039 1279.17 285.257 1279.39 285.474 1279.61C287.104 1281.24 288.737 1282.87 290.116 1284.14C290.897 1284.87 291.63 1285.5 292.259 1285.97C292.572 1286.2 292.891 1286.42 293.2 1286.58C293.47 1286.72 293.9 1286.92 294.393 1286.94C299.953 1287.1 305.32 1288.42 311.016 1289.82C311.926 1290.04 312.844 1290.27 313.773 1290.49C320.456 1292.1 327.575 1293.55 335.553 1292.93C362.559 1290.84 401.505 1281.92 412.971 1279.2C414.978 1278.72 417.033 1278.63 419.045 1278.96C427.135 1280.28 447.993 1283.89 462.026 1287.88C471.902 1290.69 479.455 1295.22 486.84 1299.66L486.923 1299.71C497.256 1305.92 507.276 1311.94 522.437 1311.94C553.366 1311.94 594.137 1305.04 625.292 1298.65C625.327 1299.65 625.349 1300.65 625.371 1301.65L625.372 1301.73C625.472 1306.31 625.573 1310.94 627.093 1315.96C628.629 1321.04 631.581 1326.42 637.254 1332.66C644.583 1340.73 648.957 1351.83 653.802 1364.19L653.816 1364.22C656.598 1371.32 659.527 1378.79 663.255 1386.15C662.776 1386.12 662.3 1386.09 661.825 1386.07C638.606 1384.82 616.428 1394.24 598.217 1406.37C580.129 1418.42 565.805 1433.25 558.05 1443.36C509.186 1473.56 480.618 1510.99 472.368 1526.11L472.367 1526.11L472.364 1526.12L472.35 1526.14L472.338 1526.17ZM277.487 1272.4C277.474 1272.39 277.467 1272.39 277.467 1272.39C277.467 1272.39 277.473 1272.39 277.487 1272.4Z"
                        fill="#118AB2" stroke="black" stroke-width="3" />
                    <path id="E6" class="map-area" :fill="mapState.E6?.color || 'grey'" style="cursor: pointer;"
                        @click="handleSVGClick('E6')"
                        d="M49.4371 1357.2C153.326 1384.58 223.26 1348.44 258.601 1329.44L263.601 1341.94C307.188 1380.15 342.601 1377.94 331.601 1436.94C329.765 1459.18 342.994 1469.13 360.101 1478.94C385.093 1493.27 412.431 1501.28 432.101 1509.94C457.534 1521.13 445.53 1521.81 466.927 1538.44C455.102 1572.7 473.666 1525.33 472.846 1526.83C457.937 1556.99 419.985 1624.83 387.455 1654.92C356.486 1683.57 269.008 1687.46 223.26 1685.72C146.952 1588.64 87.5346 1477.66 49.4371 1357.2Z"
                        fill="#118AB2" stroke="black" stroke-width="3" />
                    <path id="E7" class="map-area" :fill="mapState.E7?.color || 'grey'" style="cursor: pointer;"
                        @click="handleSVGClick('E7')"
                        d="M665.806 1387.81C664.434 1387.72 663.079 1387.64 661.745 1387.57C616.203 1385.13 574.321 1424.5 559.073 1444.49C510.278 1474.58 481.815 1511.92 473.682 1526.83C458.773 1556.99 420.821 1624.83 388.291 1654.92C357.322 1683.57 269.844 1687.46 224.096 1685.72C278.281 1754.65 340.981 1816.58 410.613 1869.9C428.024 1859.37 468.617 1831.19 482.831 1790.12C501.129 1737.26 531.626 1666.1 578.387 1603.08C625.149 1540.05 685.126 1503.45 764.417 1460.76C771.158 1457.13 777.268 1453.4 782.835 1449.58C766.101 1436.61 753.391 1435.56 739.944 1434.45C728.079 1433.47 715.64 1432.45 699.358 1423.15C682.685 1413.62 672.833 1400.99 665.806 1387.81Z"
                        fill="#118AB2" stroke="black" stroke-width="3" />
                    <path id="D1" class="map-area" :fill="mapState.D1?.color || 'grey'" style="cursor: pointer;"
                        @click="handleSVGClick('D1')" fill-rule="evenodd" clip-rule="evenodd"
                        d="M1006.36 1238.13L1035.06 1176.62L1083.62 1183.24L1207.64 1307.26L1396.72 1465.84L1478.04 1563.43L1461.77 1575.63C1450.93 1563.43 1424.77 1539.03 1406.88 1539.03C1404.91 1539.03 1399.87 1539.39 1392.53 1539.91L1392.53 1539.91L1392.52 1539.91C1376.28 1541.06 1348.74 1543.01 1318.05 1543.67C1285.63 1544.38 1249.69 1543.65 1219.83 1539.03C1174.64 1532.05 1132.41 1498.37 1132.41 1498.37L1126.9 1494.72C1128.16 1494.52 1129.33 1494.39 1130.38 1494.3C1113.43 1475.33 1077.52 1428.84 1069.38 1394.68C1061.25 1360.53 1052.44 1308.61 1049.05 1286.93L1006.36 1238.13ZM1326.34 1835.47C1326.11 1835.26 1325.88 1835.05 1325.64 1834.84C1325.5 1834.72 1325.36 1834.59 1325.22 1834.47C1325.62 1834.82 1326.02 1835.18 1326.42 1835.54C1326.39 1835.51 1326.37 1835.49 1326.34 1835.47Z"
                        fill="#06D6A0" />
                    <path
                        d="M1035.06 1176.62L1035.27 1175.13L1034.17 1174.98L1033.71 1175.98L1035.06 1176.62ZM1006.36 1238.13L1005 1237.5L1004.58 1238.38L1005.23 1239.12L1006.36 1238.13ZM1083.62 1183.24L1084.68 1182.18L1084.32 1181.82L1083.82 1181.75L1083.62 1183.24ZM1207.64 1307.26L1206.58 1308.32L1206.62 1308.37L1206.67 1308.41L1207.64 1307.26ZM1396.72 1465.84L1397.87 1464.88L1397.78 1464.78L1397.68 1464.69L1396.72 1465.84ZM1478.04 1563.43L1478.94 1564.63L1480.2 1563.68L1479.19 1562.47L1478.04 1563.43ZM1461.77 1575.63L1460.65 1576.63L1461.57 1577.66L1462.67 1576.83L1461.77 1575.63ZM1392.53 1539.91L1392.42 1538.41L1392.41 1538.41L1392.39 1538.42L1392.53 1539.91ZM1392.53 1539.91L1392.63 1541.41L1392.65 1541.4L1392.66 1541.4L1392.53 1539.91ZM1392.52 1539.91L1392.63 1541.41L1392.63 1541.41L1392.52 1539.91ZM1318.05 1543.67L1318.09 1545.17L1318.09 1545.17L1318.05 1543.67ZM1219.83 1539.03L1219.61 1540.52L1219.61 1540.52L1219.83 1539.03ZM1132.41 1498.37L1133.35 1497.2L1133.29 1497.16L1133.24 1497.12L1132.41 1498.37ZM1126.9 1494.72L1126.67 1493.24L1122.86 1493.84L1126.07 1495.97L1126.9 1494.72ZM1130.38 1494.3L1130.49 1495.8L1133.52 1495.57L1131.5 1493.31L1130.38 1494.3ZM1049.05 1286.93L1050.53 1286.7L1050.47 1286.27L1050.18 1285.94L1049.05 1286.93ZM1326.34 1835.47L1327.34 1834.35L1327.34 1834.35L1326.34 1835.47ZM1325.64 1834.84L1324.65 1835.96L1324.65 1835.96L1325.64 1834.84ZM1326.42 1835.54L1325.42 1836.66L1327.42 1834.42L1326.42 1835.54ZM1033.71 1175.98L1005 1237.5L1007.72 1238.77L1036.42 1177.25L1033.71 1175.98ZM1083.82 1181.75L1035.27 1175.13L1034.86 1178.1L1083.41 1184.72L1083.82 1181.75ZM1208.7 1306.2L1084.68 1182.18L1082.56 1184.3L1206.58 1308.32L1208.7 1306.2ZM1397.68 1464.69L1208.6 1306.11L1206.67 1308.41L1395.75 1466.99L1397.68 1464.69ZM1479.19 1562.47L1397.87 1464.88L1395.56 1466.8L1476.89 1564.39L1479.19 1562.47ZM1462.67 1576.83L1478.94 1564.63L1477.14 1562.23L1460.87 1574.43L1462.67 1576.83ZM1406.88 1540.53C1411.04 1540.53 1415.79 1541.96 1420.83 1544.39C1425.85 1546.81 1431.05 1550.18 1436.07 1553.96C1446.11 1561.51 1455.28 1570.58 1460.65 1576.63L1462.9 1574.63C1457.42 1568.47 1448.1 1559.25 1437.87 1551.56C1432.76 1547.71 1427.39 1544.22 1422.13 1541.68C1416.89 1539.16 1411.67 1537.53 1406.88 1537.53V1540.53ZM1392.63 1541.41C1400.02 1540.88 1404.98 1540.53 1406.88 1540.53V1537.53C1404.84 1537.53 1399.72 1537.9 1392.42 1538.41L1392.63 1541.41ZM1392.66 1541.4L1392.66 1541.4L1392.39 1538.42L1392.39 1538.42L1392.66 1541.4ZM1392.63 1541.41L1392.63 1541.41L1392.42 1538.41L1392.41 1538.41L1392.63 1541.41ZM1318.09 1545.17C1348.82 1544.51 1376.38 1542.56 1392.63 1541.41L1392.42 1538.41C1376.17 1539.56 1348.67 1541.51 1318.02 1542.17L1318.09 1545.17ZM1318.02 1542.17C1285.63 1542.88 1249.79 1542.15 1220.06 1537.55L1219.61 1540.52C1249.59 1545.15 1285.64 1545.88 1318.09 1545.17L1318.02 1542.17ZM1220.06 1537.55C1197.73 1534.1 1176.06 1524.03 1159.92 1514.78C1151.87 1510.16 1145.21 1505.76 1140.58 1502.51C1138.26 1500.89 1136.45 1499.56 1135.21 1498.63C1134.6 1498.17 1134.13 1497.81 1133.82 1497.57C1133.66 1497.44 1133.54 1497.35 1133.46 1497.29C1133.42 1497.26 1133.39 1497.23 1133.37 1497.22C1133.36 1497.21 1133.36 1497.21 1133.35 1497.2C1133.35 1497.2 1133.35 1497.2 1133.35 1497.2C1133.35 1497.2 1133.35 1497.2 1133.35 1497.2C1133.35 1497.2 1133.35 1497.2 1132.41 1498.37C1131.48 1499.54 1131.48 1499.54 1131.48 1499.54C1131.48 1499.54 1131.48 1499.55 1131.48 1499.55C1131.48 1499.55 1131.48 1499.55 1131.49 1499.55C1131.49 1499.56 1131.5 1499.56 1131.51 1499.57C1131.53 1499.59 1131.56 1499.61 1131.61 1499.65C1131.69 1499.71 1131.81 1499.81 1131.98 1499.94C1132.3 1500.19 1132.78 1500.56 1133.41 1501.03C1134.67 1501.97 1136.51 1503.33 1138.86 1504.97C1143.55 1508.26 1150.28 1512.71 1158.43 1517.38C1174.71 1526.72 1196.75 1536.98 1219.61 1540.52L1220.06 1537.55ZM1133.24 1497.12L1127.73 1493.47L1126.07 1495.97L1131.58 1499.62L1133.24 1497.12ZM1130.26 1492.81C1129.17 1492.89 1127.96 1493.03 1126.67 1493.24L1127.14 1496.2C1128.35 1496.01 1129.49 1495.88 1130.49 1495.8L1130.26 1492.81ZM1067.92 1395.03C1072.05 1412.37 1083.19 1432.72 1095.33 1451.02C1107.48 1469.34 1120.74 1485.77 1129.26 1495.3L1131.5 1493.31C1123.07 1483.87 1109.9 1467.56 1097.83 1449.36C1085.74 1431.13 1074.85 1411.15 1070.84 1394.33L1067.92 1395.03ZM1047.57 1287.16C1050.96 1308.85 1059.78 1360.81 1067.92 1395.03L1070.84 1394.33C1062.73 1360.24 1053.92 1308.38 1050.53 1286.7L1047.57 1287.16ZM1005.23 1239.12L1047.92 1287.91L1050.18 1285.94L1007.49 1237.14L1005.23 1239.12ZM1327.34 1834.35C1327.11 1834.14 1326.87 1833.93 1326.64 1833.72L1324.65 1835.96C1324.88 1836.17 1325.11 1836.38 1325.34 1836.58L1327.34 1834.35ZM1326.64 1833.72C1326.5 1833.6 1326.36 1833.47 1326.21 1833.35L1324.22 1835.59C1324.36 1835.71 1324.51 1835.84 1324.65 1835.96L1326.64 1833.72ZM1327.42 1834.42C1327.02 1834.06 1326.62 1833.7 1326.21 1833.35L1324.22 1835.59C1324.62 1835.94 1325.02 1836.3 1325.42 1836.66L1327.42 1834.42ZM1327.42 1834.42C1327.41 1834.41 1327.39 1834.39 1327.38 1834.38C1327.36 1834.37 1327.35 1834.36 1327.34 1834.35L1325.34 1836.58C1325.36 1836.6 1325.37 1836.61 1325.38 1836.62C1325.4 1836.63 1325.41 1836.65 1325.42 1836.66L1327.42 1834.42Z"
                        fill="black" />
                    <path id="D2" class="map-area" :fill="mapState.D2?.color || 'grey'" style="cursor: pointer;"
                        @click="handleSVGClick('D2')"
                        d="M825.411 1467.87L776.637 1453.65C778.977 1452.18 781.228 1450.69 783.396 1449.19C815.924 1426.7 829.812 1401.28 843.359 1376.49C844.057 1375.21 844.753 1373.93 845.452 1372.66C855.93 1353.56 866.766 1334.94 886.404 1318.44C887.42 1313.59 888.518 1308.79 889.685 1304.06C907.191 1233.14 940.297 1177.51 947.863 1165.38L949.43 1164.94L1035.06 1176.62L1006.36 1238.13L1049.05 1286.93C1052.44 1308.61 1061.25 1360.53 1069.38 1394.68C1077.52 1428.84 1113.43 1475.33 1130.38 1494.3C1121.57 1494.98 1103.95 1499.59 1103.95 1512.6C1103.95 1525.61 1080.91 1545.13 1069.38 1553.26L859.973 1530.9L825.411 1467.87Z"
                        fill="#06D6A0" stroke="black" stroke-width="3" />
                    <path id="D3" class="map-area" :fill="mapState.D3?.color || 'grey'" style="cursor: pointer;"
                        @click="handleSVGClick('D3')"
                        d="M782.437 1449.44L825.411 1467.87L858.724 1528.62C846.75 1548.21 836.45 1570.64 835.576 1589.86C835.47 1592.19 835.348 1594.63 835.22 1597.18L835.219 1597.19C832.889 1643.63 828.696 1727.19 888.437 1858.23C888.437 1895.64 811.179 1923.97 772.55 1933.46C724.541 1944.47 645.159 1964.7 595.015 1982.87C592.351 1981.6 589.694 1980.31 587.042 1979.02C524.458 1948.48 465.391 1911.85 410.613 1869.9C428.024 1859.37 468.617 1831.19 482.831 1790.12C501.129 1737.26 531.626 1666.1 578.387 1603.08C625.149 1540.05 685.126 1503.45 764.417 1460.76C768.743 1458.43 778.608 1451.85 782.437 1449.44Z"
                        fill="#06D6A0" stroke="black" stroke-width="3" />
                    <path id="D4" class="map-area" :fill="mapState.D4?.color || 'grey'" style="cursor: pointer;"
                        @click="handleSVGClick('D4')"
                        d="M835.576 1589.86C836.45 1570.64 846.75 1548.21 858.724 1528.62L859.973 1530.9L1061.15 1552.39L1067.35 1555.3C1060.57 1570.21 1047.83 1606.13 1051.09 1630.52C1053.58 1649.25 1123.55 1692.51 1181.42 1728.29C1217.78 1750.78 1249.37 1770.31 1256.43 1778.94C1259.73 1782.97 1268.59 1789.65 1280.21 1798.42C1287.47 1803.9 1325.31 1832.27 1323.94 1834.44C1322.57 1836.6 1318.44 1835.87 1315.39 1835.87C1277.98 1881.41 1070.74 1854.84 971.795 1835.87L886.953 1854.96C828.766 1725.79 832.908 1643.25 835.219 1597.19L835.22 1597.18C835.348 1594.63 835.47 1592.19 835.576 1589.86Z"
                        fill="#06D6A0" stroke="black" stroke-width="3" />
                    <path id="D5" class="map-area" :fill="mapState.D5?.color || 'grey'" style="cursor: pointer;"
                        @click="handleSVGClick('D5')"
                        d="M1318.05 1543.67C1285.63 1544.38 1249.69 1543.65 1219.83 1539.03C1174.64 1532.05 1132.41 1498.37 1132.41 1498.37L1126.9 1494.72C1117.62 1496.2 1103.95 1501.14 1103.95 1512.6C1103.95 1525.61 1080.91 1545.13 1069.38 1553.27L1061.15 1552.39L1067.35 1555.3C1060.57 1570.21 1047.83 1606.13 1051.09 1630.52C1053.58 1649.25 1123.55 1692.51 1181.42 1728.29C1217.78 1750.78 1249.37 1770.31 1256.43 1778.94C1259.73 1782.97 1268.59 1789.65 1280.21 1798.42C1291.62 1807.02 1305.7 1817.64 1319.8 1829.74C1322.01 1831.64 1324.22 1833.57 1326.42 1835.54C1325.9 1835.07 1325.37 1834.6 1324.85 1834.14C1330.35 1818.61 1335.2 1802.05 1337.76 1785.04C1346.78 1725.02 1333.05 1666.8 1322.22 1620.85C1318.64 1605.66 1315.38 1591.82 1313.36 1579.7C1311.08 1566.02 1313.39 1553.94 1318.05 1543.67Z"
                        fill="#06D6A0" stroke="black" stroke-width="3" />
                    <path
                        d="M1320.2 1830.09C1320.07 1829.97 1319.93 1829.86 1319.8 1829.74C1318.71 1831.47 1317.55 1833.12 1316.33 1834.69C1317.22 1834.26 1318.09 1833.84 1318.94 1833.44C1319.33 1832.32 1319.76 1831.2 1320.2 1830.09Z"
                        fill="#06D6A0" />
                    <path id="D6" class="map-area" :fill="mapState.D6?.color || 'grey'" style="cursor: pointer;"
                        @click="handleSVGClick('D6')"
                        d="M1256.03 1858.25C1259.09 1868.2 1262.92 1877.55 1266.71 1886.84C1276.58 1910.98 1286.26 1934.67 1281.94 1967.44C1294.95 2009.48 1285.54 2029.47 1279.58 2042.13C1276.61 2048.44 1274.5 2052.94 1276.44 2057.44C1278.89 2056.69 1281.73 2055.82 1284.88 2054.86C1297.97 2050.86 1316.55 2045.18 1336.21 2039.14C1336.25 2039.25 1336.3 2039.36 1336.35 2039.47C1315.68 2045.79 1294.8 2052.05 1273.96 2058.19C1199.66 2075.02 1122.34 2083.91 1042.95 2083.91C881.322 2083.91 728.295 2047.07 591.81 1981.33C592.877 1981.85 593.946 1982.36 595.015 1982.87C645.159 1964.7 724.541 1944.47 772.55 1933.46C811.179 1923.97 888.437 1895.64 888.437 1858.23C887.938 1857.14 887.443 1856.05 886.953 1854.96L971.795 1835.87C1044.82 1849.87 1176.84 1868.01 1256.03 1858.25Z"
                        fill="#06D6A0" />
                    <path
                        d="M1320.2 1830.09C1320.07 1829.97 1319.93 1829.86 1319.8 1829.74C1318.71 1831.47 1317.55 1833.12 1316.33 1834.69C1317.22 1834.26 1318.09 1833.84 1318.94 1833.44C1319.33 1832.32 1319.76 1831.2 1320.2 1830.09Z"
                        stroke="black" stroke-width="3" />
                    <path
                        d="M1256.03 1858.25C1259.09 1868.2 1262.92 1877.55 1266.71 1886.84C1276.58 1910.98 1286.26 1934.67 1281.94 1967.44C1294.95 2009.48 1285.54 2029.47 1279.58 2042.13C1276.61 2048.44 1274.5 2052.94 1276.44 2057.44C1278.89 2056.69 1281.73 2055.82 1284.88 2054.86C1297.97 2050.86 1316.55 2045.18 1336.21 2039.14C1336.25 2039.25 1336.3 2039.36 1336.35 2039.47C1315.68 2045.79 1294.8 2052.05 1273.96 2058.19C1199.66 2075.02 1122.34 2083.91 1042.95 2083.91C881.322 2083.91 728.295 2047.07 591.81 1981.33C592.877 1981.85 593.946 1982.36 595.015 1982.87C645.159 1964.7 724.541 1944.47 772.55 1933.46C811.179 1923.97 888.437 1895.64 888.437 1858.23C887.938 1857.14 887.443 1856.05 886.953 1854.96L971.795 1835.87C1044.82 1849.87 1176.84 1868.01 1256.03 1858.25Z"
                        stroke="black" stroke-width="3" />
                    <path id="D7" class="map-area" :fill="mapState.D7?.color || 'grey'" style="cursor: pointer;"
                        @click="handleSVGClick('D7')"
                        d="M1318.05 1543.67C1313.39 1553.94 1311.08 1566.02 1313.36 1579.7C1315.38 1591.82 1318.64 1605.66 1322.22 1620.85C1333.05 1666.8 1346.78 1725.02 1337.75 1785.04C1335.2 1802.05 1324.44 1817.91 1318.94 1833.44C1301.53 1841.73 1274.94 1856.44 1255.94 1857.94C1266.94 1893.94 1287.94 1921.94 1281.94 1967.44C1301.44 2030.44 1270.6 2043.91 1276.44 2057.44C1307.15 2048.05 1397.31 2020.55 1426.28 2011.06C1505.38 1979.71 1579.72 1938.95 1647.92 1890.16C1616.07 1868.29 1581.18 1812.76 1565.46 1783.01L1478.04 1563.43L1461.77 1575.63C1450.93 1563.43 1424.77 1539.03 1406.88 1539.03C1404.91 1539.03 1399.87 1539.39 1392.53 1539.91C1376.28 1541.06 1348.74 1543.01 1318.05 1543.67Z"
                        fill="#06D6A0" stroke="black" stroke-width="3" />
                    <path id="C1" class="map-area" :fill="mapState.C1?.color || 'grey'" style="cursor: pointer;"
                        @click="handleSVGClick('C1')"
                        d="M1128.99 1125.37L1145.63 1128.34C1146.3 1122.24 1152.95 1110.86 1174.09 1114.11C1200.52 1118.18 1255.41 1170.02 1256.43 1198.49C1288.96 1242.2 1328.61 1273.71 1491.26 1273.71C1527.21 1257.37 1579.59 1138.54 1580.27 1044.5C1558.26 1047.28 1543.12 1050.07 1534.97 1052.1C1476.35 1063.28 1349.14 1085.65 1309.29 1085.65C1269.44 1085.65 1180.87 1073.45 1141.56 1067.35L1128.99 1125.37Z"
                        fill="#FFD166" stroke="black" stroke-width="3" />
                    <path id="C2" class="map-area" :fill="mapState.C2?.color || 'grey'" style="cursor: pointer;"
                        @click="handleSVGClick('C2')"
                        d="M1128.99 1125.37L1141.94 1122.94C1147.44 1121.44 1152.95 1110.86 1174.09 1114.11C1199.44 1118.01 1255.41 1170.02 1256.43 1198.49C1288.96 1242.2 1328.61 1273.71 1491.26 1273.71C1491.56 1273.57 1491.87 1273.43 1492.17 1273.27C1488.42 1293.91 1485.14 1316.26 1486.17 1325.56C1487.45 1337.1 1498.45 1351.07 1508.94 1364.41C1515.08 1372.21 1521.05 1379.8 1524.8 1386.55C1532.93 1401.19 1528.19 1425.18 1524.8 1435.34C1539.03 1458.39 1565.46 1507.32 1557.33 1518.7C1549.2 1530.09 1532.26 1539.71 1524.8 1543.1L1479.05 1565.97L1478.04 1563.43L1396.72 1465.84L1207.64 1307.26L1088.58 1188.2L1087.68 1185.27L1128.34 1128.34L1128.99 1125.37Z"
                        fill="#FFD166" stroke="black" stroke-width="3" />
                    <path id="C3" class="map-area" :fill="mapState.C3?.color || 'grey'" style="cursor: pointer;"
                        @click="handleSVGClick('C3')"
                        d="M1596.71 1153.67C1615.43 1146.54 1635.12 1139.05 1643.44 1144.44C1649.11 1148.11 1656.01 1149.64 1662.7 1151.13C1666.42 1151.96 1670.08 1152.78 1673.44 1153.94C1700.8 1163.4 1719.94 1184.94 1750.94 1230.94C1750.94 1230.94 1756.94 1237.94 1759.94 1243.44C1758.22 1247.28 1752.12 1254.37 1744.58 1263.16C1732.65 1277.05 1717.09 1295.16 1709.44 1311.32C1698.21 1329.5 1693.12 1335.71 1676.19 1356.41L1674.68 1358.26C1660.24 1375.9 1655 1382.3 1648.94 1427.44C1646.44 1487.94 1601.94 1527.44 1584.44 1539.03C1588.14 1541.2 1590.79 1542.81 1592.77 1544.02C1579.85 1538.9 1565.17 1531.03 1552.99 1523.85C1554.6 1522.19 1556.07 1520.47 1557.33 1518.7C1565.46 1507.32 1539.03 1458.39 1524.8 1435.34C1528.19 1425.18 1532.93 1401.19 1524.8 1386.55C1521.05 1379.8 1515.08 1372.21 1508.94 1364.41C1498.45 1351.07 1487.45 1337.1 1486.17 1325.56C1485.14 1316.26 1488.42 1293.91 1492.17 1273.27C1513.38 1262.69 1540.03 1217.36 1558.43 1162.81C1565.25 1165.64 1580.62 1159.79 1596.71 1153.67Z"
                        fill="#FFD166" stroke="black" stroke-width="3" />
                    <path id="C4" class="map-area" :fill="mapState.C4?.color || 'grey'" style="cursor: pointer;"
                        @click="handleSVGClick('C4')"
                        d="M1879.98 1311.32C1874.44 1323.73 1868.91 1337.69 1863.31 1354.02C1855.18 1403.83 1833 1488.33 1768.77 1539.03C1731.37 1558.55 1696.26 1559.36 1683.38 1557.33C1683.47 1558.06 1683.57 1558.8 1683.67 1559.56C1683.67 1559.6 1683.68 1559.64 1683.69 1559.68C1683.96 1561.68 1684.29 1563.78 1684.68 1565.95C1684.29 1563.8 1683.97 1561.73 1683.69 1559.74L1683.69 1559.75C1661.51 1556.66 1627.76 1551.9 1610.19 1549.2C1595.34 1546.91 1602.49 1549.6 1584.44 1539.03C1601.94 1527.44 1646.44 1487.94 1648.94 1427.44C1655.04 1382.03 1660.3 1375.83 1674.94 1357.94C1692.88 1336.01 1697.94 1329.94 1709.44 1311.32C1721.94 1284.94 1755.49 1253.35 1759.94 1243.44C1792.07 1280.68 1821.31 1301.24 1838.44 1309.44C1861.94 1311.05 1867.95 1311.28 1879.98 1311.32Z"
                        fill="#FFD166" stroke="black" stroke-width="3" />
                    <path id="C5" class="map-area" :fill="mapState.C5?.color || 'grey'" style="cursor: pointer;"
                        @click="handleSVGClick('C5')"
                        d="M1841.34 1310.51C1819.26 1304.22 1791.09 1283.81 1750.94 1230.94C1719.94 1184.94 1700.8 1163.4 1673.44 1153.94C1670.08 1152.78 1666.42 1151.96 1662.7 1151.13C1656.01 1149.64 1649.11 1148.11 1643.44 1144.44C1635.12 1139.05 1615.43 1146.54 1596.71 1153.67C1580.62 1159.79 1565.25 1165.64 1558.43 1162.81C1571.19 1124.96 1580 1082.69 1580.27 1044.5C1620.49 1039.41 1683.62 1034.33 1768.77 1033.8C1841.97 1033.8 1906.01 1033.8 2018.85 1062.27C2044.03 1068.62 2066.42 1064.48 2083.79 1058.55C2082.84 1123.35 2075.97 1186.71 2063.69 1248.13C2035.56 1240.11 2001.29 1232.74 1982.25 1236.1C1954.6 1240.98 1902.96 1288.28 1880.6 1311.32C1880.39 1311.32 1880.19 1311.32 1879.98 1311.32C1879.94 1311.32 1879.91 1311.32 1879.87 1311.32C1874.74 1311.3 1866.09 1313.64 1856.44 1313.08C1852.13 1312.69 1845.94 1311.73 1841.34 1310.51Z"
                        fill="#FFD166" />
                    <path
                        d="M1750.94 1230.94C1791.09 1283.81 1819.26 1304.22 1841.34 1310.51C1845.94 1311.73 1852.13 1312.69 1856.44 1313.08C1866.09 1313.64 1874.74 1311.3 1879.87 1311.32C1879.91 1311.32 1879.94 1311.32 1879.98 1311.32C1880.19 1311.32 1880.39 1311.32 1880.6 1311.32C1902.96 1288.28 1954.6 1240.98 1982.25 1236.1C2001.29 1232.74 2035.56 1240.11 2063.69 1248.13C2075.97 1186.71 2082.84 1123.35 2083.79 1058.55C2066.42 1064.48 2044.03 1068.62 2018.85 1062.27C1906.01 1033.8 1841.97 1033.8 1768.77 1033.8C1683.62 1034.33 1620.49 1039.41 1580.27 1044.5C1580 1082.69 1571.19 1124.96 1558.43 1162.81C1565.25 1165.64 1580.62 1159.79 1596.71 1153.67C1615.43 1146.54 1635.12 1139.05 1643.44 1144.44C1649.11 1148.11 1656.01 1149.64 1662.7 1151.13C1666.42 1151.96 1670.08 1152.78 1673.44 1153.94C1700.8 1163.4 1719.94 1184.94 1750.94 1230.94ZM1750.94 1230.94C1819.65 1318.67 1850.34 1314.74 1870.93 1312.11"
                        stroke="black" stroke-width="3" />
                    <path id="C6" class="map-area" :fill="mapState.C6?.color || 'grey'" style="cursor: pointer;"
                        @click="handleSVGClick('C6')"
                        d="M1682.81 1560.64C1689.44 1607.17 1725.39 1701.5 1821.43 1732.52C1769.68 1790.9 1711.47 1843.41 1647.91 1888.94C1632.31 1878.04 1615.93 1859.02 1601.45 1838.96C1586.83 1818.69 1574.22 1797.43 1566.37 1782.59L1480.32 1566.46L1525.23 1544C1531.46 1541.17 1544.24 1534.04 1553.15 1525.11C1562.12 1530.37 1572.39 1535.98 1582.31 1540.58C1592.45 1545.29 1602.3 1549 1610.04 1550.19C1627.42 1552.86 1660.62 1557.55 1682.81 1560.64ZM1682.67 1559.63L1682.7 1559.89L1683.69 1559.75C1683.74 1560.09 1683.79 1560.43 1683.84 1560.78L1682.67 1559.63Z"
                        fill="#FFD166" stroke="black" stroke-width="2" />
                    <path id="C7" class="map-area" :fill="mapState.C7?.color || 'grey'" style="cursor: pointer;"
                        @click="handleSVGClick('C7')"
                        d="M1879.98 1311.32C1874.44 1323.73 1868.91 1337.69 1863.31 1354.02C1855.18 1403.83 1833 1488.33 1768.77 1539.03C1731.37 1558.55 1696.26 1559.36 1683.38 1557.33C1688.8 1602.67 1724.34 1700.96 1823.2 1732.03C1942.32 1597.25 2027.06 1431.37 2063.69 1248.13C2035.56 1240.11 2001.29 1232.74 1982.25 1236.1C1954.6 1240.98 1902.96 1288.28 1880.6 1311.32C1880.39 1311.32 1880.19 1311.32 1879.98 1311.32Z"
                        fill="#FFD166" stroke="black" stroke-width="3" />
                    <path id="B1" class="map-area" :fill="mapState.B1?.color || 'grey'" style="cursor: pointer;"
                        @click="handleSVGClick('B1')"
                        d="M1262.93 647.935C1279 617.332 1294.3 588.185 1305.16 563.984C1315.82 590.848 1333.48 630.388 1345.89 641.414C1350.02 651.328 1363.05 661.914 1377.74 673.854C1399.21 691.295 1424.23 711.625 1430.26 736.97C1450.05 767.018 1418.06 825.069 1395.61 865.794C1386.93 881.558 1379.67 894.726 1377.4 902.669C1377.36 902.812 1377.32 902.955 1377.28 903.098C1350.94 907.778 1317.12 940.604 1290.1 966.824C1271.21 985.155 1255.65 1000.26 1248.3 1000.26H1150.71L1120.82 1012.22L1116.15 1002.29L1075.48 973.828C1075.48 973.828 1148.68 875.222 1191.37 803.046C1204.43 759.312 1234.85 701.402 1262.93 647.935Z"
                        fill="#F78C6B" stroke="black" stroke-width="3" />
                    <path id="B2" class="map-area" :fill="mapState.B2?.color || 'grey'" style="cursor: pointer;"
                        @click="handleSVGClick('B2')"
                        d="M1309.29 1085.65C1271.24 1085.65 1188.75 1074.53 1147.17 1068.21L1120.82 1012.22L1150.71 1000.26H1248.3C1255.65 1000.26 1271.21 985.155 1290.1 966.824C1318.21 939.539 1353.7 905.101 1380.45 902.669C1425.18 898.603 1530.9 925.033 1551.23 947.397C1566.64 964.347 1575.97 1016.7 1579.21 1044.63C1557.78 1047.37 1542.98 1050.1 1534.97 1052.1C1476.35 1063.28 1349.14 1085.65 1309.29 1085.65Z"
                        fill="#F78C6B" stroke="black" stroke-width="3" />
                    <path id="B3" class="map-area" :fill="mapState.B3?.color || 'grey'" style="cursor: pointer;"
                        @click="handleSVGClick('B3')"
                        d="M2046.99 767.203C2019.29 773.903 1978.22 781.037 1961.92 773.566C1942.4 764.621 1853.49 782.715 1811.47 792.881C1797.24 803.047 1750.48 831.51 1732.18 835.576C1717.54 838.829 1624.42 903.347 1579.7 935.199L1542.73 940.609C1546.32 942.889 1549.2 945.164 1551.23 947.397C1566.64 964.348 1575.97 1016.7 1579.21 1044.63C1619.38 1039.5 1682.87 1034.34 1768.77 1033.8C1841.97 1033.8 1906.01 1033.8 2018.85 1062.27C2022.39 1063.16 2025.88 1063.85 2029.31 1064.35L2063.13 1063.86C2070.6 1062.6 2077.52 1060.69 2083.79 1058.55L2083.79 1058.56C2083.87 1053.36 2083.91 1048.16 2083.91 1042.95C2083.91 947.49 2071.06 855.028 2046.99 767.203Z"
                        fill="#F78C6B" stroke="black" stroke-width="3" />
                    <path id="B4" class="map-area" :fill="mapState.B4?.color || 'grey'" style="cursor: pointer;"
                        @click="handleSVGClick('B4')"
                        d="M1376.38 903.149C1377.45 902.959 1378.51 902.815 1379.56 902.72C1419.82 899.06 1509.49 920.109 1541.83 940.66L1578.8 935.25C1623.53 903.398 1716.65 838.881 1731.28 835.628C1749.09 831.671 1793.83 804.621 1809.35 793.797C1801.7 783.784 1791.33 772.594 1778.05 762.436C1752.69 743.045 1701.07 752.106 1665.73 758.309C1652.91 760.561 1642.23 762.436 1635.73 762.436C1623.93 762.436 1586.93 748.647 1549.34 734.635C1509.19 719.674 1468.36 704.459 1456.81 705.508C1446.97 706.404 1435.03 714.73 1424.58 724.183C1426.68 728.317 1428.31 732.593 1429.37 737.022C1449.15 767.07 1417.16 825.121 1394.72 865.846C1386.03 881.609 1378.78 894.777 1376.51 902.72L1376.38 903.149Z"
                        fill="#F78C6B" stroke="black" stroke-width="3" />
                    <path id="B5" class="map-area" :fill="mapState.B5?.color || 'grey'" style="cursor: pointer;"
                        @click="handleSVGClick('B5')"
                        d="M1323.75 602.949L1321.81 603.195L1322.55 605.003C1334.6 634.584 1352.07 654.925 1376.8 675.018C1394.58 689.469 1414.43 705.628 1424.14 724.809L1425.03 726.563L1426.49 725.244C1431.66 720.555 1437.18 716.175 1442.6 712.865C1448.04 709.542 1453.25 707.368 1457.84 706.951C1460.45 706.714 1464.94 707.402 1471.03 708.917C1477.05 710.416 1484.45 712.673 1492.77 715.44C1509.41 720.972 1529.62 728.506 1549.71 735.99L1549.72 735.996C1568.51 742.997 1587.17 749.953 1602.62 755.16C1610.35 757.764 1617.29 759.937 1623.05 761.461C1628.77 762.974 1633.46 763.884 1636.62 763.884C1643.25 763.884 1654.02 761.994 1666.69 759.77L1666.89 759.735C1684.57 756.63 1706.2 752.836 1726.57 752.223C1747 751.608 1765.79 754.214 1778.03 763.576C1791.19 773.641 1801.47 784.732 1809.05 794.656L1809.92 795.799L1811.1 794.975L1811.14 794.948L1861.85 780.379L1863.8 779.82L1862.7 778.121L1862.43 778.295C1862.7 778.121 1862.7 778.12 1862.7 778.12L1862.69 778.118L1862.69 778.11L1862.67 778.08L1862.59 777.96C1862.52 777.854 1862.42 777.697 1862.29 777.491C1862.02 777.08 1861.62 776.475 1861.12 775.699C1860.1 774.148 1858.64 771.913 1856.83 769.18C1853.22 763.715 1848.25 756.256 1842.81 748.279C1831.96 732.37 1819.17 714.283 1811.61 705.938C1811.6 705.935 1811.6 705.932 1811.6 705.93L1786.36 677.242C1783.93 670.329 1777.35 664.527 1768.59 659.078C1759.66 653.533 1748.12 648.156 1735.52 642.284L1735.45 642.251C1707.38 629.169 1673.83 613.513 1650.02 587.641C1614.4 530.355 1616.59 476.419 1628.57 437.151L1629.32 434.699L1626.82 435.248C1587.27 443.928 1547.16 462.156 1508.48 479.733C1504.91 481.354 1501.36 482.969 1497.82 484.57L1497.73 484.612L1497.64 484.666C1490.89 488.891 1483.51 493.303 1475.77 497.93C1449.62 513.562 1419.36 531.651 1395.43 553.325C1389.27 558.902 1383.81 564.289 1378.72 569.314C1378.1 569.924 1377.49 570.528 1376.88 571.126C1371.26 576.671 1366.05 581.724 1360.73 586.121C1350.14 594.879 1339.14 600.994 1323.75 602.949Z"
                        fill="#F78C6B" stroke="black" stroke-width="3" />
                    <path id="B6" class="map-area" :fill="mapState.B6?.color || 'grey'" style="cursor: pointer;"
                        @click="handleSVGClick('B6')"
                        d="M1627.14 436.713C1630.28 436.024 1633.44 435.468 1636.62 435.053C1674.03 430.174 1776.91 426.921 1827.74 428.954L1849.93 385.353C1940.55 496.419 2008.69 626.543 2047.42 768.789C2047.28 768.26 2047.14 767.731 2046.99 767.203C2019.29 773.903 1978.22 781.037 1961.92 773.566C1925.44 767.203 1864.94 781.437 1864.94 781.437C1864.94 781.437 1825.44 723.437 1810.49 706.937L1785.04 678.01C1784.67 674.152 1780.44 664.637 1766.44 657.437C1748.94 648.437 1673.74 618.937 1650.94 588.437C1628.14 557.937 1610.84 502.49 1627.14 436.713Z"
                        fill="#F78C6B" stroke="black" stroke-width="3" />
                    <path id="B7" class="map-area" :fill="mapState.B7?.color || 'grey'" style="cursor: pointer;"
                        @click="handleSVGClick('B7')"
                        d="M1371.64 578.329C1357.4 591.937 1333 604.271 1322.94 602.937C1310.44 591.437 1314.2 571.011 1302.84 569.075C1307.98 557.91 1312.28 547.694 1315.39 538.742C1327.58 510.889 1341.15 473.935 1355.94 433.666L1355.94 433.664C1401.61 309.326 1458.88 153.386 1522.77 136.185C1527.85 134.817 1533.39 131.786 1539.26 127.707C1658.94 192.742 1764.44 280.565 1849.93 385.353L1827.74 428.954C1776.91 426.92 1674.03 430.173 1636.62 435.053C1633.44 435.468 1630.28 436.024 1627.14 436.713C1587.76 445.357 1547.79 463.518 1509.08 481.109C1505.52 482.726 1501.97 484.338 1498.44 485.937C1491.64 490.195 1484.22 494.629 1476.45 499.272C1450.32 514.894 1420.25 532.873 1396.44 554.437C1390.31 559.991 1384.87 565.355 1379.77 570.382C1376.98 573.141 1374.29 575.798 1371.64 578.329Z"
                        fill="#F78C6B" stroke="black" stroke-width="3" />
                    <path id="A1" class="map-area" :fill="mapState.A1?.color || 'grey'" style="cursor: pointer;"
                        @click="handleSVGClick('A1')"
                        d="M1011.32 961.097C968.614 956.592 942.656 967.511 949.43 990.093L919.95 957.563L895.553 905.719C860.072 885.761 838.681 858.728 817.066 831.414C799.047 808.643 780.873 785.677 754.252 766.45C736.994 753.987 738.74 739.333 741.145 719.138C741.369 717.254 741.6 715.322 741.821 713.339L778.649 719.689L817.278 679.026C817.278 658.695 823.377 617.627 847.775 616C872.172 614.374 918.934 645.141 939.265 660.728C972.472 681.737 1032.79 742.46 1008.39 817.278C1032.79 829.477 1032.79 888.437 1020.59 923C1016.12 935.66 1013.19 949.088 1011.32 961.097Z"
                        fill="#EF476F" stroke="black" stroke-width="3" />
                    <path id="A2" class="map-area" :fill="mapState.A2?.color || 'grey'" style="cursor: pointer;"
                        @click="handleSVGClick('A2')" fill-rule="evenodd" clip-rule="evenodd"
                        d="M888.455 628.103C896.974 629.815 907.307 637.22 916.891 644.088L916.891 644.088C928.178 652.176 938.423 659.518 943.437 655.937C963.724 641.446 976.01 629.62 985.8 620.196C993.142 613.129 999.08 607.413 1005.94 602.937C1014.93 597.068 1023.91 590.497 1032.77 584.02C1050.68 570.924 1068.06 558.209 1083.94 552.437C1085.28 551.949 1086.6 551.454 1087.91 550.964L1087.91 550.964C1098.54 546.991 1108.28 543.349 1120.21 546.214V546.214C1135.14 549.801 1150.58 556.675 1166.04 563.556C1187.42 573.078 1208.83 582.613 1228.98 583.47C1256.76 584.652 1284.06 577.318 1302.25 570.36C1291.66 593.229 1277.61 619.975 1262.93 647.936C1234.85 701.402 1204.43 759.312 1191.37 803.046C1148.68 875.222 1075.48 973.828 1075.48 973.828L1085.64 980.939L1085.02 981.506C1071.93 975.048 1056.84 969.684 1038.89 965.695C1029.11 963.523 1019.88 962 1011.32 961.097C1013.19 949.088 1016.12 935.66 1020.59 923C1032.79 888.437 1032.79 829.477 1008.39 817.278C1032.79 742.46 972.472 681.737 939.265 660.728C927.627 651.806 907.328 637.909 887.521 627.961C887.83 628.009 888.142 628.056 888.455 628.103Z"
                        fill="#EF476F" />
                    <path
                        d="M888.455 628.103L888.751 626.632L888.714 626.625L888.677 626.619L888.455 628.103ZM916.891 644.088L916.017 645.307L916.046 645.327L916.075 645.346L916.891 644.088ZM916.891 644.088L917.765 642.869L917.737 642.849L917.707 642.83L916.891 644.088ZM943.437 655.937L942.565 654.716L942.565 654.716L943.437 655.937ZM985.8 620.196L984.76 619.116L984.76 619.116L985.8 620.196ZM1005.94 602.937L1006.76 604.193L1006.76 604.193L1005.94 602.937ZM1032.77 584.02L1031.88 582.809L1031.88 582.809L1032.77 584.02ZM1083.94 552.437L1083.42 551.027L1083.42 551.027L1083.94 552.437ZM1087.91 550.964L1088.44 552.369L1088.47 552.357L1088.5 552.344L1087.91 550.964ZM1087.91 550.964L1087.39 549.559L1087.36 549.571L1087.32 549.585L1087.91 550.964ZM1120.21 546.214L1119.86 547.673L1121.71 548.117V546.214H1120.21ZM1120.21 546.214L1120.56 544.756L1118.71 544.312V546.214H1120.21ZM1166.04 563.556L1165.43 564.926L1165.43 564.926L1166.04 563.556ZM1228.98 583.47L1228.92 584.969L1228.92 584.969L1228.98 583.47ZM1302.25 570.36L1303.61 570.991L1305.16 567.64L1301.71 568.959L1302.25 570.36ZM1262.93 647.936L1264.25 648.633L1264.25 648.633L1262.93 647.936ZM1191.37 803.046L1192.66 803.81L1192.76 803.652L1192.81 803.476L1191.37 803.046ZM1075.48 973.828L1074.28 972.934L1073.36 974.172L1074.62 975.057L1075.48 973.828ZM1085.64 980.939L1086.65 982.048L1088.04 980.786L1086.5 979.71L1085.64 980.939ZM1085.02 981.506L1084.35 982.851L1085.27 983.304L1086.03 982.616L1085.02 981.506ZM1038.89 965.695L1039.21 964.231L1039.21 964.231L1038.89 965.695ZM1011.32 961.097L1009.84 960.867L1009.59 962.424L1011.16 962.589L1011.32 961.097ZM1020.59 923L1022 923.499L1022 923.499L1020.59 923ZM1008.39 817.278L1006.96 816.813L1006.56 818.042L1007.72 818.62L1008.39 817.278ZM939.265 660.728L938.352 661.919L938.406 661.96L938.463 661.996L939.265 660.728ZM887.521 627.961L887.748 626.479L886.848 629.302L887.521 627.961ZM888.16 629.573C892.161 630.378 896.696 632.549 901.499 635.446C906.285 638.334 911.215 641.866 916.017 645.307L917.765 642.869C912.983 639.442 907.955 635.838 903.049 632.878C898.159 629.928 893.268 627.54 888.751 626.632L888.16 629.573ZM916.075 645.346L916.075 645.346L917.707 642.83L917.707 642.83L916.075 645.346ZM916.017 645.307C921.63 649.329 927.109 653.26 931.823 655.718C934.181 656.948 936.445 657.864 938.512 658.213C940.594 658.565 942.623 658.362 944.309 657.158L942.565 654.716C941.744 655.303 940.613 655.525 939.011 655.255C937.394 654.982 935.451 654.227 933.21 653.059C928.726 650.719 923.439 646.935 917.765 642.869L916.017 645.307ZM944.309 657.158C964.687 642.602 977.036 630.715 986.84 621.277L984.76 619.116C974.984 628.526 962.761 640.291 942.565 654.716L944.309 657.158ZM986.84 621.277C994.206 614.187 1000.04 608.577 1006.76 604.193L1005.12 601.681C998.12 606.249 992.078 612.071 984.76 619.116L986.84 621.277ZM1006.76 604.193C1015.79 598.298 1024.8 591.704 1033.66 585.231L1031.88 582.809C1023.02 589.291 1014.07 595.837 1005.12 601.681L1006.76 604.193ZM1033.66 585.231C1051.62 572.09 1068.82 559.53 1084.45 553.847L1083.42 551.027C1067.31 556.888 1049.73 569.759 1031.88 582.809L1033.66 585.231ZM1084.45 553.847C1085.8 553.356 1087.13 552.859 1088.44 552.369L1087.39 549.559C1086.08 550.049 1084.76 550.542 1083.42 551.027L1084.45 553.847ZM1088.5 552.344L1088.5 552.344L1087.32 549.585L1087.32 549.585L1088.5 552.344ZM1088.44 552.369C1099.11 548.38 1108.44 544.929 1119.86 547.673L1120.56 544.756C1108.13 541.77 1097.97 545.603 1087.39 549.559L1088.44 552.369ZM1121.71 546.214V546.214H1118.71V546.214H1121.71ZM1166.65 562.186C1151.22 555.318 1135.65 548.38 1120.56 544.756L1119.86 547.673C1134.64 551.221 1149.94 558.032 1165.43 564.926L1166.65 562.186ZM1229.05 581.972C1209.24 581.129 1188.11 571.742 1166.65 562.186L1165.43 564.926C1186.73 574.414 1208.43 584.097 1228.92 584.969L1229.05 581.972ZM1301.71 568.959C1283.64 575.876 1256.54 583.142 1229.05 581.972L1228.92 584.969C1256.97 586.162 1284.49 578.761 1302.78 571.761L1301.71 568.959ZM1264.25 648.633C1278.93 620.682 1293 593.9 1303.61 570.991L1300.89 569.73C1290.31 592.557 1276.29 619.267 1261.6 647.238L1264.25 648.633ZM1192.81 803.476C1205.82 759.913 1236.15 702.152 1264.25 648.633L1261.6 647.238C1233.55 700.652 1203.05 758.711 1189.93 802.617L1192.81 803.476ZM1075.48 973.828C1076.69 974.722 1076.69 974.721 1076.69 974.721C1076.69 974.72 1076.69 974.719 1076.69 974.717C1076.69 974.714 1076.7 974.71 1076.7 974.703C1076.71 974.691 1076.72 974.673 1076.74 974.649C1076.78 974.601 1076.83 974.53 1076.9 974.435C1077.04 974.246 1077.25 973.964 1077.52 973.594C1078.07 972.853 1078.88 971.758 1079.92 970.338C1082.01 967.499 1085.03 963.363 1088.8 958.174C1096.33 947.797 1106.82 933.209 1118.64 916.365C1142.28 882.683 1171.28 839.95 1192.66 803.81L1190.08 802.283C1168.76 838.319 1139.82 880.975 1116.19 914.641C1104.38 931.47 1093.9 946.045 1086.37 956.412C1082.61 961.595 1079.59 965.727 1077.5 968.562C1076.46 969.979 1075.66 971.073 1075.11 971.812C1074.84 972.181 1074.63 972.462 1074.49 972.65C1074.42 972.744 1074.37 972.815 1074.33 972.863C1074.31 972.886 1074.3 972.904 1074.29 972.916C1074.29 972.922 1074.28 972.926 1074.28 972.929C1074.28 972.931 1074.28 972.932 1074.28 972.933C1074.28 972.933 1074.28 972.934 1075.48 973.828ZM1086.5 979.71L1076.34 972.599L1074.62 975.057L1084.78 982.168L1086.5 979.71ZM1086.03 982.616L1086.65 982.048L1084.63 979.829L1084.01 980.397L1086.03 982.616ZM1038.56 967.16C1056.4 971.125 1071.39 976.451 1084.35 982.851L1085.68 980.161C1072.48 973.645 1057.27 968.243 1039.21 964.231L1038.56 967.16ZM1011.16 962.589C1019.66 963.485 1028.84 964.998 1038.56 967.16L1039.21 964.231C1029.39 962.047 1020.1 960.515 1011.48 959.605L1011.16 962.589ZM1019.17 922.501C1014.67 935.273 1011.71 948.797 1009.84 960.867L1012.8 961.328C1014.66 949.38 1017.58 936.047 1022 923.499L1019.17 922.501ZM1007.72 818.62C1013.38 821.449 1017.76 827.061 1020.92 834.66C1024.08 842.247 1025.96 851.671 1026.72 861.863C1028.23 882.257 1025.2 905.428 1019.17 922.501L1022 923.499C1028.18 906.009 1031.25 882.419 1029.71 861.642C1028.94 851.249 1027.01 841.485 1023.69 833.507C1020.37 825.539 1015.6 819.207 1009.06 815.936L1007.72 818.62ZM938.463 661.996C954.903 672.397 978.101 692.669 994.141 719.592C1010.16 746.486 1019 779.92 1006.96 816.813L1009.82 817.743C1022.18 779.818 1013.06 745.481 996.718 718.057C980.397 690.662 956.834 670.069 940.067 659.461L938.463 661.996ZM886.848 629.302C906.546 639.195 926.763 653.034 938.352 661.919L940.178 659.538C928.49 650.578 908.11 636.623 888.194 626.621L886.848 629.302ZM888.677 626.619C888.365 626.573 888.056 626.526 887.748 626.479L887.294 629.444C887.605 629.492 887.918 629.539 888.234 629.586L888.677 626.619Z"
                        fill="black" />
                    <path id="A3" class="map-area" :fill="mapState.A3?.color || 'grey'" style="cursor: pointer;"
                        @click="handleSVGClick('A3')"
                        d="M518.411 433.02C452.44 345.059 406.909 309.127 384.331 291.309C373.509 282.769 367.96 278.389 367.96 274.437L363.624 254.2C412.485 212.079 465.303 174.421 521.444 141.859C538.596 155.542 558.411 173.656 567.205 189.046C579.136 208.93 586.088 225.08 591.956 238.714C601.09 259.931 607.599 275.054 626.166 288.669C637.127 296.707 658.594 301.331 684.809 306.977C731.53 317.04 793.329 330.351 837.609 372.027C892.91 424.074 868.784 496.724 849.808 526.543C848.452 550.94 853.874 604.615 886.404 624.132C886.442 625.241 886.461 626.341 886.461 627.433C872.035 620.285 857.957 615.321 847.775 616C823.377 617.626 817.278 658.695 817.278 679.026L778.649 719.689L741.82 713.339C747.268 664.451 747.159 584.6 518.411 433.02Z"
                        fill="#EF476F" stroke="black" stroke-width="3" />
                    <path id="A5" class="map-area" :fill="mapState.A5?.color || 'grey'" style="cursor: pointer;"
                        @click="handleSVGClick('A5')"
                        d="M1120.21 546.215C1135.14 549.801 1150.58 556.675 1166.04 563.556C1187.42 573.078 1208.83 582.613 1228.98 583.47C1256.76 584.652 1284.06 577.318 1302.25 570.36C1307.65 558.694 1312.16 548.036 1315.39 538.742C1327.58 510.889 1341.15 473.936 1355.94 433.667L1355.94 433.664C1401.61 309.325 1458.88 153.386 1522.77 136.185C1527.85 134.817 1533.39 131.786 1539.26 127.707C1434.29 70.6649 1318.41 31.1546 1195.56 13.1064L1187.3 67.0597C1162.23 111.11 1108.01 212.427 1091.75 265.288C1077.69 310.985 1101.55 341.609 1122.32 368.258C1131.58 380.142 1140.22 391.236 1144.61 402.523C1155.99 431.8 1133.09 489.269 1120.21 514.344V546.215Z"
                        fill="#EF476F" stroke="black" stroke-width="3" />
                    <path id="A6" class="map-area" :fill="mapState.A6?.color || 'grey'" style="cursor: pointer;"
                        @click="handleSVGClick('A6')"
                        d="M1040.92 365.927C1016.52 375.686 855.907 327.298 855.907 327.298C855.907 327.298 865.937 306.437 855.907 246.937C851.626 221.542 852.857 211.024 854.277 198.883C855.063 192.164 855.907 184.947 855.907 174.437C852.149 162.422 855.501 141.739 858.628 122.445C860.576 110.426 862.437 98.9466 862.437 90.4371C862.437 72.8919 851.133 52.8481 842.282 37.1545C839.255 31.7873 836.515 26.929 834.613 22.8534C901.928 9.17874 971.602 2 1042.95 2C1095.74 2 1147.61 5.92909 1198.28 13.5108C1197.38 13.3748 1196.47 13.24 1195.56 13.1064L1187.3 67.0596C1162.23 111.11 1108.01 212.427 1091.75 265.288C1084.27 289.592 1087.52 309.633 1095.32 327.079C1079.98 340.901 1058.01 358.604 1040.92 365.927Z"
                        fill="#EF476F" stroke="black" stroke-width="3" />
                    <path id="A4" class="map-area" :fill="mapState.A4?.color || 'grey'" style="cursor: pointer;"
                        @click="handleSVGClick('A4')"
                        d="M855.907 327.298C849.022 326.672 830.919 330.325 810.251 348.83C810.305 349.538 810.354 350.255 810.398 350.981C819.961 357.069 829.108 364.025 837.609 372.027C892.91 424.074 868.784 496.724 849.808 526.543C848.453 550.94 853.893 603.449 886.423 622.966C886.652 629.6 887.521 626.437 887.521 627.937C906.081 630.78 934.009 662.671 943.437 655.937C978.937 630.58 989.937 613.382 1005.94 602.937C1033.11 585.201 1060.21 561.064 1083.94 552.437C1096.17 547.989 1106.81 542.996 1120.21 546.215V514.344C1133.09 489.269 1155.99 431.8 1144.61 402.523C1140.22 391.236 1131.58 380.142 1122.32 368.258C1112.59 355.783 1102.19 342.436 1095.32 327.079C1079.98 340.901 1058.01 358.604 1040.92 365.927C1016.52 375.686 907.413 344.241 855.907 327.298Z"
                        fill="#EF476F" />
                    <path
                        d="M1090.49 984.33C1088.7 983.367 1086.88 982.426 1085.02 981.506L1085.64 980.939L1090.49 984.33Z"
                        fill="#EF476F" />
                    <path
                        d="M855.907 327.298C849.022 326.672 830.919 330.325 810.251 348.83C810.305 349.538 810.354 350.255 810.398 350.981C819.961 357.069 829.108 364.025 837.609 372.027C892.91 424.074 868.784 496.724 849.808 526.543C848.453 550.94 853.893 603.449 886.423 622.966C886.652 629.6 887.521 626.437 887.521 627.937C906.081 630.78 934.009 662.671 943.437 655.937C978.937 630.58 989.937 613.382 1005.94 602.937C1033.11 585.201 1060.21 561.064 1083.94 552.437C1096.17 547.989 1106.81 542.996 1120.21 546.215V514.344C1133.09 489.269 1155.99 431.8 1144.61 402.523C1140.22 391.236 1131.58 380.142 1122.32 368.258C1112.59 355.783 1102.19 342.436 1095.32 327.079C1079.98 340.901 1058.01 358.604 1040.92 365.927C1016.52 375.686 907.413 344.241 855.907 327.298Z"
                        stroke="black" stroke-width="3" />
                    <path
                        d="M1090.49 984.33C1088.7 983.367 1086.88 982.426 1085.02 981.506L1085.64 980.939L1090.49 984.33Z"
                        stroke="black" stroke-width="3" />
                    <path
                        d="M855.907 327.298C855.907 327.298 861.379 328.946 870.457 331.574C870.206 331.63 869.956 331.686 869.706 331.742C864.769 330.183 860.143 328.691 855.907 327.298Z"
                        fill="#EF476F" />
                    <path id="A1" class="map-area" :fill="mapState.A7?.color || 'grey'" style="cursor: pointer;"
                        @click="handleSVGClick('A7')"
                        d="M810.398 350.981C810.354 350.255 810.305 349.538 810.251 348.83C830.919 330.325 849.022 326.672 855.907 327.298C855.907 327.298 865.937 306.437 855.907 246.937C851.626 221.542 852.857 211.024 854.277 198.883C855.063 192.164 855.907 184.947 855.907 174.437C852.149 162.422 855.501 141.739 858.628 122.445C860.576 110.426 862.437 98.9465 862.437 90.437C862.437 72.8918 851.133 52.848 842.282 37.1544C839.255 31.7872 836.515 26.9289 834.613 22.8533C722.648 45.5982 617.211 86.3143 521.444 141.859C538.596 155.542 558.411 173.656 567.205 189.046C579.136 208.93 586.088 225.08 591.956 238.714C601.09 259.931 607.599 275.053 626.166 288.669C637.127 296.707 658.594 301.331 684.809 306.977C722.56 315.108 770.155 325.36 810.398 350.981Z"
                        fill="#EF476F" />
                    <path
                        d="M855.907 327.298C855.907 327.298 861.379 328.946 870.457 331.574C870.206 331.63 869.956 331.686 869.706 331.742C864.769 330.183 860.143 328.691 855.907 327.298ZM855.907 327.298C849.022 326.672 830.919 330.325 810.251 348.83C810.305 349.538 810.354 350.255 810.398 350.981C770.155 325.36 722.56 315.108 684.809 306.977C658.594 301.331 637.127 296.707 626.166 288.669C607.599 275.053 601.09 259.931 591.956 238.714C586.088 225.08 579.136 208.93 567.205 189.046C558.411 173.656 538.596 155.542 521.444 141.859C617.211 86.3143 722.648 45.5982 834.613 22.8533C836.515 26.9289 839.255 31.7872 842.282 37.1544C851.133 52.848 862.437 72.8918 862.437 90.437C862.437 98.9465 860.576 110.426 858.628 122.445C855.501 141.739 852.149 162.422 855.907 174.437C855.907 184.947 855.063 192.164 854.277 198.883C852.857 211.024 851.626 221.542 855.907 246.937C865.937 306.437 855.907 327.298 855.907 327.298Z"
                        stroke="black" stroke-width="3" />
                    <path id="F1" class="map-area" :fill="mapState.F1?.color || 'grey'" style="cursor: pointer;"
                        @click="handleSVGClick('F1')"
                        d="M497.937 1040.32C499.795 1040.42 501.741 1040.37 503.687 1040.32C505.632 1040.27 507.577 1040.23 509.437 1040.32C614.48 1033.98 682.039 1041.88 772.983 1052.5L772.986 1052.5L772.992 1052.51C785.807 1054 799.086 1055.55 813.001 1057.13L813.016 1057.13C841.924 1060.4 872.021 1063.81 904.039 1067.08C905.502 1050.71 908.302 1034.28 913.317 1025.54C888.045 999.237 826.521 979.228 773.566 963.662C697.709 941.365 604.595 944.884 584.487 952.48C584.48 952.483 584.474 952.485 584.467 952.488C560.837 961.425 501.437 960.937 486.437 989.437C484.937 1000.44 499.437 1026.94 501.437 1034.94L497.937 1040.32Z"
                        fill="#073B4C" stroke="black" stroke-width="3" />
                    <path id="F5" class="map-area" :fill="mapState.F5?.color || 'grey'" style="cursor: pointer;"
                        @click="handleSVGClick('F2')"
                        d="M264.271 874.205C293.05 862.118 337.103 863.576 371.206 867.983C407.124 825.679 480.236 788.077 528.737 767.91C534.498 669.37 501.314 606.002 483.848 586.52C465.761 558.259 412.253 530.326 365.713 510.91C348.201 523.565 329.532 538.596 327.298 545.858C324.045 556.43 334.753 664.117 340.513 716.639C332.042 730.532 308.593 759.944 282.569 766.45C256.546 772.956 259.528 814.567 264.271 834.559V874.205Z"
                        fill="#073B4C" stroke="black" stroke-width="3" />
                    <path id="F2" class="map-area" :fill="mapState.F2?.color || 'grey'" style="cursor: pointer;"
                        @click="handleSVGClick('F2')"
                        d="M743.178 719.137C743.582 715.751 744.004 712.21 744.357 708.496C727.616 716.648 703.094 731.195 694.275 746.119C685.014 761.792 680.745 787.949 677.62 807.097C676.286 815.272 675.16 822.169 673.944 826.427C670.691 837.813 642.092 851.502 628.199 856.924C623.116 865.734 614.17 885.794 619.05 895.553C623.473 904.399 626.559 931.175 627.855 946.959C666.978 945.54 723.962 949.082 773.566 963.662C826.521 979.228 888.045 999.237 913.317 1025.54C913.493 1025.24 913.67 1024.94 913.851 1024.66C916.643 1020.24 925.163 1014.13 933.844 1007.91C951.221 995.451 969.24 982.535 943.247 981.766C941.564 981.716 939.942 979.596 936.495 975.09C933.478 971.146 929.062 965.374 921.984 957.563L897.586 905.719C862.105 885.761 840.714 858.728 819.099 831.413C801.08 808.643 782.906 785.677 756.285 766.45C739.027 753.987 740.773 739.333 743.178 719.137Z"
                        fill="#073B4C" stroke="black" stroke-width="3" />
                    <path id="F3" class="map-area" :fill="mapState.F3?.color || 'grey'" style="cursor: pointer;"
                        @click="handleSVGClick('F3')"
                        d="M555.999 960.495L556.067 960.483L556.133 960.465C574.414 955.443 592.283 952.058 605.587 949.928C612.237 948.864 617.742 948.114 621.582 947.63C623.503 947.388 625.006 947.212 626.029 947.098C626.54 947.04 626.931 946.998 627.193 946.971C627.324 946.957 627.423 946.946 627.489 946.94L627.563 946.932L627.581 946.93L627.585 946.93L627.586 946.93L629.037 946.785L628.933 945.33C626.934 917.337 624.877 906.883 623.031 901.539C622.383 899.664 621.726 898.35 621.177 897.25C620.952 896.801 620.746 896.388 620.565 895.987C619.941 894.603 619.382 892.925 618.948 889.435C618.973 889.225 618.998 889.016 619.023 888.809C619.73 882.909 620.287 878.254 621.623 873.604C622.979 868.882 625.154 864.125 629.179 858.15C636.183 855.391 646.639 850.663 655.828 845.201C660.516 842.414 664.918 839.412 668.371 836.356C671.785 833.336 674.452 830.109 675.386 826.839C676.627 822.496 677.763 815.536 679.081 807.457L679.1 807.338C679.67 803.848 680.276 800.134 680.943 796.294L679.466 796.037L678.762 795.915L678.542 795.557C678.407 795.64 678.272 795.723 678.135 795.806L677.988 795.78C677.98 795.823 677.973 795.866 677.965 795.909C670.81 800.234 661.902 804.347 652.661 806.214C643.213 808.122 633.527 807.664 624.977 802.818C598.21 781.41 582.418 771.553 571.973 767.651C566.707 765.684 562.725 765.2 559.34 765.56C556.006 765.914 553.368 767.079 550.877 768.18L550.811 768.21C548.2 769.364 545.703 770.459 542.406 770.851C539.331 771.217 535.467 770.977 530.148 769.426C530.178 768.949 530.207 768.473 530.235 767.997L530.374 765.604L528.161 766.525C503.859 776.63 473.389 791.103 444.484 808.357C415.6 825.598 388.179 845.675 370.063 867.012L368.276 869.117L371.014 869.47C384.889 871.263 402.352 874.753 411.318 876.833C424.515 885.986 450.744 905.649 468.57 945.055C471.672 951.912 478.265 968.739 481.492 980.339C482.34 983.386 483.519 987.259 484.899 991.596L487.829 991.143C487.829 990.698 487.85 990.282 487.892 989.896C492.923 980.559 503.103 974.369 515.584 969.926C528.142 965.456 542.712 962.859 555.999 960.495Z"
                        fill="#073B4C" stroke="black" stroke-width="3" />
                    <path id="F4" class="map-area" :fill="mapState.F4?.color || 'grey'" style="cursor: pointer;"
                        @click="handleSVGClick('F4')"
                        d="M312.05 490.964L242.803 377.072C279.522 332.998 319.813 292.005 363.232 254.538C364.039 254.421 364.847 254.309 365.657 254.2L369.993 274.437C369.993 278.389 375.542 282.769 386.364 291.309C408.942 309.127 454.473 345.059 520.444 433.02C741.793 579.697 749.056 659.21 744.358 708.496C727.616 716.648 703.094 731.195 694.275 746.119C686.584 759.134 682.336 779.379 679.327 796.836C664.631 805.86 642.103 814.332 624.132 804.063C570.493 761.152 561.52 765.117 551.418 769.582C546.203 771.886 540.688 774.323 528.576 770.517C535.082 670.488 501.468 606.173 483.848 586.52C457.824 545.858 358.472 505.873 312.05 490.964Z"
                        fill="#073B4C" stroke="black" stroke-width="3" />
                    <path id="F6" class="map-area" :fill="mapState.F6?.color || 'grey'" style="cursor: pointer;"
                        @click="handleSVGClick('F6')"
                        d="M30.5071 806.437C12.3061 881.584 2.60324 959.913 2.43709 1040.42C104.2 1030.9 151.181 1031.09 218.639 1031.37L218.675 1031.38L218.713 1031.38H218.723C231.08 1031.43 244.229 1031.48 258.668 1031.48C320.876 1031.48 395.347 1035.36 472.051 1039.36L472.054 1039.36L472.603 1039.39C484.486 1040.01 500.437 1046.53 500.437 1032.49C492.279 1013.25 487.095 995.156 482.819 980.231C479.513 968.692 476.75 959.047 473.574 952.231C457.869 912.905 427.08 885.016 413.648 875.987C382.652 868.965 309.265 856.083 267.937 872.937C247.273 881.765 201.154 879.666 180.145 875.987C108.181 875.987 55.6881 835.542 30.5071 806.437Z"
                        fill="#073B4C" stroke="black" stroke-width="3" />
                    <path id="F7" class="map-area" :fill="mapState.F7?.color || 'grey'" style="cursor: pointer;"
                        @click="handleSVGClick('F7')"
                        d="M242.803 377.072L312.05 490.964C326.208 495.511 345.29 502.39 365.713 510.91C348.201 523.565 329.532 538.596 327.298 545.858C324.045 556.43 334.753 664.117 340.513 716.639C332.042 730.532 308.593 759.945 282.57 766.45C256.546 772.956 259.528 814.567 264.271 834.56V874.205C243.94 883.151 197.518 877.933 176.848 874.205C106.042 874.205 54.3953 833.222 29.62 803.729C67.1289 644.234 141.32 498.885 242.803 377.072Z"
                        fill="#073B4C" stroke="black" stroke-width="3" />


                    <text :x="900" :y="770" font-family="Arial" font-size="40" font-weight="bold" fill="white"
                        text-anchor="middle">A1</text>
                    <text :x="900" :y="800" font-family="Arial" font-size="30" fill="white" text-anchor="middle">
                        {{ mapState.A1?.poin_wilayah ?? 'err' }} + {{ mapState.A1?.poin_troops ?? 'err' }}</text>

                    <text :x="1100" :y="720" font-family="Arial" font-size="40" font-weight="bold" fill="white"
                        text-anchor="middle">A2</text>
                    <text :x="1100" :y="750" font-family="Arial" font-size="30" fill="white" text-anchor="middle">
                        {{ mapState.A2?.poin_wilayah ?? 'err' }} + {{ mapState.A2?.poin_troops ?? 'err' }}</text>

                    <text :x="680" :y="430" font-family="Arial" font-size="40" font-weight="bold" fill="white"
                        text-anchor="middle">A3</text>
                    <text :x="680" :y="460" font-family="Arial" font-size="30" fill="white" text-anchor="middle">
                        {{ mapState.A3?.poin_wilayah ?? 'err' }} + {{ mapState.A3?.poin_troops ?? 'err' }}</text>

                    <text :x="980" :y="470" font-family="Arial" font-size="40" font-weight="bold" fill="white"
                        text-anchor="middle">A4</text>
                    <text :x="980" :y="500" font-family="Arial" font-size="30" fill="white" text-anchor="middle">
                        {{ mapState.A4?.poin_wilayah ?? 'err' }} + {{ mapState.A4?.poin_troops ?? 'err' }}</text>

                    <text :x="1250" :y="300" font-family="Arial" font-size="40" font-weight="bold" fill="white"
                        text-anchor="middle">A5</text>
                    <text :x="1250" :y="330" font-family="Arial" font-size="30" fill="white" text-anchor="middle">
                        {{ mapState.A5?.poin_wilayah ?? 'err' }} + {{ mapState.A5?.poin_troops ?? 'err' }}</text>

                    <text :x="980" :y="180" font-family="Arial" font-size="40" font-weight="bold" fill="white"
                        text-anchor="middle">A6</text>
                    <text :x="980" :y="210" font-family="Arial" font-size="30" fill="white" text-anchor="middle">
                        {{ mapState.A6?.poin_wilayah ?? 'err' }} + {{ mapState.A6?.poin_troops ?? 'err' }}</text>

                    <text :x="720" :y="200" font-family="Arial" font-size="40" font-weight="bold" fill="white"
                        text-anchor="middle">A7</text>
                    <text :x="720" :y="230" font-family="Arial" font-size="30" fill="white" text-anchor="middle">
                        {{ mapState.A7?.poin_wilayah ?? 'err' }} + {{ mapState.A7?.poin_troops ?? 'err' }}</text>

                    <text :x="1280" :y="850" font-family="Arial" font-size="40" font-weight="bold" fill="white"
                        text-anchor="middle">B1</text>
                    <text :x="1280" :y="880" font-family="Arial" font-size="30" fill="white" text-anchor="middle">
                        {{ mapState.B1?.poin_wilayah ?? 'err' }} + {{ mapState.B1?.poin_troops ?? 'err' }}</text>

                    <text :x="1425" :y="1000" font-family="Arial" font-size="40" font-weight="bold" fill="white"
                        text-anchor="middle">B2</text>
                    <text :x="1425" :y="1030" font-family="Arial" font-size="30" fill="white" text-anchor="middle">
                        {{ mapState.B2?.poin_wilayah ?? 'err' }} + {{ mapState.B2?.poin_troops ?? 'err' }}</text>

                    <text :x="1800" :y="950" font-family="Arial" font-size="40" font-weight="bold" fill="white"
                        text-anchor="middle">B3</text>
                    <text :x="1800" :y="980" font-family="Arial" font-size="30" fill="white" text-anchor="middle">
                        {{ mapState.B3?.poin_wilayah ?? 'err' }} + {{ mapState.B3?.poin_troops ?? 'err' }}</text>

                    <text :x="1560" :y="820" font-family="Arial" font-size="40" font-weight="bold" fill="white"
                        text-anchor="middle">B4</text>
                    <text :x="1560" :y="850" font-family="Arial" font-size="30" fill="white" text-anchor="middle">
                        {{ mapState.B4?.poin_wilayah ?? 'err' }} + {{ mapState.B4?.poin_troops ?? 'err' }}</text>

                    <text :x="1560" :y="620" font-family="Arial" font-size="40" font-weight="bold" fill="white"
                        text-anchor="middle">B5</text>
                    <text :x="1560" :y="650" font-family="Arial" font-size="30" fill="white" text-anchor="middle">
                        {{ mapState.B5?.poin_wilayah ?? 'err' }} + {{ mapState.B5?.poin_troops ?? 'err' }}</text>

                    <text :x="1530" :y="350" font-family="Arial" font-size="40" font-weight="bold" fill="white"
                        text-anchor="middle">B7</text>
                    <text :x="1530" :y="380" font-family="Arial" font-size="30" fill="white" text-anchor="middle">
                        {{ mapState.B7?.poin_wilayah ?? 'err' }} + {{ mapState.B7?.poin_troops ?? 'err' }}</text>

                    <text :x="1850" :y="600" font-family="Arial" font-size="40" font-weight="bold" fill="white"
                        text-anchor="middle">B6</text>
                    <text :x="1850" :y="630" font-family="Arial" font-size="30" fill="white" text-anchor="middle">
                        {{ mapState.B6?.poin_wilayah ?? 'err' }} + {{ mapState.B6?.poin_troops ?? 'err' }}</text>

                    <text :x="1400" :y="1170" font-family="Arial" font-size="40" font-weight="bold" fill="white"
                        text-anchor="middle">C1</text>
                    <text :x="1400" :y="1200" font-family="Arial" font-size="30" fill="white" text-anchor="middle">
                        {{ mapState.C1?.poin_wilayah ?? 'err' }} + {{ mapState.C1?.poin_troops ?? 'err' }}</text>

                    <text :x="1400" :y="1350" font-family="Arial" font-size="40" font-weight="bold" fill="white"
                        text-anchor="middle">C2</text>
                    <text :x="1400" :y="1380" font-family="Arial" font-size="30" fill="white" text-anchor="middle">
                        {{ mapState.C2?.poin_wilayah ?? 'err' }} + {{ mapState.C2?.poin_troops ?? 'err' }}</text>

                    <text :x="1600" :y="1300" font-family="Arial" font-size="40" font-weight="bold" fill="white"
                        text-anchor="middle">C3</text>
                    <text :x="1600" :y="1330" font-family="Arial" font-size="30" fill="white" text-anchor="middle">
                        {{ mapState.C3?.poin_wilayah ?? 'err' }} + {{ mapState.C3?.poin_troops ?? 'err' }}</text>

                    <text :x="1750" :y="1400" font-family="Arial" font-size="40" font-weight="bold" fill="white"
                        text-anchor="middle">C4</text>
                    <text :x="1750" :y="1430" font-family="Arial" font-size="30" fill="white" text-anchor="middle">
                        {{ mapState.C4?.poin_wilayah ?? 'err' }} + {{ mapState.C4?.poin_troops ?? 'err' }}</text>

                    <text :x="1850" :y="1130" font-family="Arial" font-size="40" font-weight="bold" fill="white"
                        text-anchor="middle">C5</text>
                    <text :x="1850" :y="1160" font-family="Arial" font-size="30" fill="white" text-anchor="middle">
                        {{ mapState.C5?.poin_wilayah ?? 'err' }} + {{ mapState.C5?.poin_troops ?? 'err' }}</text>

                    <text :x="1620" :y="1650" font-family="Arial" font-size="40" font-weight="bold" fill="white"
                        text-anchor="middle">C6</text>
                    <text :x="1620" :y="1680" font-family="Arial" font-size="30" fill="white" text-anchor="middle">
                        {{ mapState.C6?.poin_wilayah ?? 'err' }} + {{ mapState.C6?.poin_troops ?? 'err' }}</text>

                    <text :x="1900" :y="1450" font-family="Arial" font-size="40" font-weight="bold" fill="white"
                        text-anchor="middle">C7</text>
                    <text :x="1900" :y="1480" font-family="Arial" font-size="30" fill="white" text-anchor="middle">
                        {{ mapState.C7?.poin_wilayah ?? 'err' }} + {{ mapState.C7?.poin_troops ?? 'err' }}</text>

                    <text :x="1150" :y="1350" font-family="Arial" font-size="40" font-weight="bold" fill="white"
                        text-anchor="middle">D1</text>
                    <text :x="1150" :y="1380" font-family="Arial" font-size="30" fill="white" text-anchor="middle">
                        {{ mapState.D1?.poin_wilayah ?? 'err' }} + {{ mapState.D1?.poin_troops ?? 'err' }}</text>

                    <text :x="960" :y="1370" font-family="Arial" font-size="40" font-weight="bold" fill="white"
                        text-anchor="middle">D2</text>
                    <text :x="960" :y="1400" font-family="Arial" font-size="30" fill="white" text-anchor="middle">
                        {{ mapState.D2?.poin_wilayah ?? 'err' }} + {{ mapState.D2?.poin_troops ?? 'err' }}</text>

                    <text :x="700" :y="1700" font-family="Arial" font-size="40" font-weight="bold" fill="white"
                        text-anchor="middle">D3</text>
                    <text :x="700" :y="1730" font-family="Arial" font-size="30" fill="white" text-anchor="middle">
                        {{ mapState.D3?.poin_wilayah ?? 'err' }} + {{ mapState.D3?.poin_troops ?? 'err' }}</text>

                    <text :x="960" :y="1700" font-family="Arial" font-size="40" font-weight="bold" fill="white"
                        text-anchor="middle">D4</text>
                    <text :x="960" :y="1730" font-family="Arial" font-size="30" fill="white" text-anchor="middle">
                        {{ mapState.D4?.poin_wilayah ?? 'err' }} + {{ mapState.D4?.poin_troops ?? 'err' }}</text>

                    <text :x="1180" :y="1620" font-family="Arial" font-size="40" font-weight="bold" fill="white"
                        text-anchor="middle">D5</text>
                    <text :x="1180" :y="1650" font-family="Arial" font-size="30" fill="white" text-anchor="middle">
                        {{ mapState.D5?.poin_wilayah ?? 'err' }} + {{ mapState.D5?.poin_troops ?? 'err' }}</text>

                    <text :x="1020" :y="1950" font-family="Arial" font-size="40" font-weight="bold" fill="white"
                        text-anchor="middle">D6</text>
                    <text :x="1020" :y="1980" font-family="Arial" font-size="30" fill="white" text-anchor="middle">
                        {{ mapState.D6?.poin_wilayah ?? 'err' }} + {{ mapState.D6?.poin_troops ?? 'err' }}</text>

                    <text :x="1450" :y="1750" font-family="Arial" font-size="40" font-weight="bold" fill="white"
                        text-anchor="middle">D7</text>
                    <text :x="1450" :y="1780" font-family="Arial" font-size="30" fill="white" text-anchor="middle">
                        {{ mapState.D7?.poin_wilayah ?? 'err' }} + {{ mapState.D7?.poin_troops ?? 'err' }}</text>

                    <text :x="780" :y="1300" font-family="Arial" font-size="40" font-weight="bold" fill="white"
                        text-anchor="middle">E1</text>
                    <text :x="780" :y="1330" font-family="Arial" font-size="30" fill="white" text-anchor="middle">
                        {{ mapState.E1?.poin_wilayah ?? 'err' }} + {{ mapState.E1?.poin_troops ?? 'err' }}</text>

                    <text :x="690" :y="1120" font-family="Arial" font-size="40" font-weight="bold" fill="white"
                        text-anchor="middle">E2</text>
                    <text :x="690" :y="1150" font-family="Arial" font-size="30" fill="white" text-anchor="middle">
                        {{ mapState.E2?.poin_wilayah ?? 'err' }} + {{ mapState.E2?.poin_troops ?? 'err' }}</text>

                    <text :x="460" :y="1190" font-family="Arial" font-size="40" font-weight="bold" fill="white"
                        text-anchor="middle">E3</text>
                    <text :x="460" :y="1220" font-family="Arial" font-size="30" fill="white" text-anchor="middle">
                        {{ mapState.E3?.poin_wilayah ?? 'err' }} + {{ mapState.E3?.poin_troops ?? 'err' }}</text>

                    <text :x="450" :y="1380" font-family="Arial" font-size="40" font-weight="bold" fill="white"
                        text-anchor="middle">E4</text>
                    <text :x="450" :y="1410" font-family="Arial" font-size="30" fill="white" text-anchor="middle">
                        {{ mapState.E4?.poin_wilayah ?? 'err' }} + {{ mapState.E4?.poin_troops ?? 'err' }}</text>

                    <text :x="170" :y="1190" font-family="Arial" font-size="40" font-weight="bold" fill="white"
                        text-anchor="middle">E5</text>
                    <text :x="170" :y="1220" font-family="Arial" font-size="30" fill="white" text-anchor="middle">
                        {{ mapState.E5?.poin_wilayah ?? 'err' }} + {{ mapState.E5?.poin_troops ?? 'err' }}</text>

                    <text :x="230" :y="1500" font-family="Arial" font-size="40" font-weight="bold" fill="white"
                        text-anchor="middle">E6</text>
                    <text :x="230" :y="1530" font-family="Arial" font-size="30" fill="white" text-anchor="middle">
                        {{ mapState.E6?.poin_wilayah ?? 'err' }} + {{ mapState.E6?.poin_troops ?? 'err' }}</text>

                    <text :x="495" :y="1600" font-family="Arial" font-size="40" font-weight="bold" fill="white"
                        text-anchor="middle">E7</text>
                    <text :x="495" :y="1630" font-family="Arial" font-size="30" fill="white" text-anchor="middle">
                        {{ mapState.E7?.poin_wilayah ?? 'err' }} + {{ mapState.E7?.poin_troops ?? 'err' }}</text>

                    <text :x="700" :y="1000" font-family="Arial" font-size="40" font-weight="bold" fill="white"
                        text-anchor="middle">F1</text>
                    <text :x="700" :y="1030" font-family="Arial" font-size="30" fill="white" text-anchor="middle">
                        {{ mapState.F1?.poin_wilayah ?? 'err' }} + {{ mapState.F1?.poin_troops ?? 'err' }}</text>

                    <text :x="750" :y="880" font-family="Arial" font-size="40" font-weight="bold" fill="white"
                        text-anchor="middle">F2</text>
                    <text :x="750" :y="910" font-family="Arial" font-size="30" fill="white" text-anchor="middle">
                        {{ mapState.F2?.poin_wilayah ?? 'err' }} + {{ mapState.F2?.poin_troops ?? 'err' }}</text>

                    <text :x="520" :y="890" font-family="Arial" font-size="40" font-weight="bold" fill="white"
                        text-anchor="middle">F3</text>
                    <text :x="520" :y="920" font-family="Arial" font-size="30" fill="white" text-anchor="middle">
                        {{ mapState.F3?.poin_wilayah ?? 'err' }} + {{ mapState.F3?.poin_troops ?? 'err' }}</text>

                    <text :x="540" :y="550" font-family="Arial" font-size="40" font-weight="bold" fill="white"
                        text-anchor="middle">F4</text>
                    <text :x="540" :y="580" font-family="Arial" font-size="30" fill="white" text-anchor="middle">
                        {{ mapState.F4?.poin_wilayah ?? 'err' }} + {{ mapState.F4?.poin_troops ?? 'err' }}</text>

                    <text :x="420" :y="670" font-family="Arial" font-size="40" font-weight="bold" fill="white"
                        text-anchor="middle">F5</text>
                    <text :x="420" :y="700" font-family="Arial" font-size="30" fill="white" text-anchor="middle">
                        {{ mapState.F5?.poin_wilayah ?? 'err' }} + {{ mapState.F5?.poin_troops ?? 'err' }}</text>

                    <text :x="250" :y="950" font-family="Arial" font-size="40" font-weight="bold" fill="white"
                        text-anchor="middle">F6</text>
                    <text :x="250" :y="980" font-family="Arial" font-size="30" fill="white" text-anchor="middle">
                        {{ mapState.F6?.poin_wilayah ?? 'err' }} + {{ mapState.F6?.poin_troops ?? 'err' }}</text>

                    <text :x="200" :y="670" font-family="Arial" font-size="40" font-weight="bold" fill="white"
                        text-anchor="middle">F7</text>
                    <text :x="200" :y="700" font-family="Arial" font-size="30" fill="white" text-anchor="middle">
                        {{ mapState.F7?.poin_wilayah ?? 'err' }} + {{ mapState.F7?.poin_troops ?? 'err' }}</text>

                </svg>
            </div>
        </div>

    </div>
</template>

<script setup>
import { initializeApp } from "firebase/app";
import {
    collection,
    addDoc,
    getFirestore,
    doc,
    onSnapshot,
    arrayUnion,
    updateDoc,
    setDoc,
    where,
    query,
    orderBy,
    getDocs,
    getDoc
} from "firebase/firestore";
import { getAuth, onAuthStateChanged } from "firebase/auth";
import { ref, onMounted, watch, onUnmounted, nextTick } from "vue";
import Dialog from 'primevue/dialog';

import { useToast } from "primevue/usetoast";

const toast = useToast();

const displayConfirmation = ref(false);

const openConfirmation = () => {
    displayConfirmation.value = true;
};

const closeConfirmation = () => {
    displayConfirmation.value = false;
};

const confirmReset = () => {
    generateMap(selectedRoom.value.code);
    closeConfirmation();
};

const firebaseConfig = {
    apiKey: "AIzaSyAHdlLJ9YPxm1kmXdO7mK9xgg8jwXjNIHM",
    authDomain: "schemarisk.firebaseapp.com",
    projectId: "schemarisk",
    storageBucket: "schemarisk.appspot.com",
    messagingSenderId: "115339774204",
    appId: "1:115339774204:web:2df41c150254b00a8a6f79",
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);
const auth = getAuth();

const isAdmin = ref(false);
const teamName = ref("");
const balance = ref(0);
const ruang = ref(null);
const elsi_bal = ref(0);
const esti_bal = ref(0);
const pisi_bal = ref(0);
const isFrozen = ref(false);

const uid = ref("");

const mapState = ref(null);
const svgMap = ref(null);

const selectedRoom = ref(null);
const rooms = ref([
    { name: 'Ruang 1', code: '1' },
    { name: 'Ruang 2', code: '2' },
    { name: 'Ruang 3', code: '3' },
    { name: 'Ruang 4', code: '4' },
    { name: 'Ruang 5', code: '5' },
    { name: 'Ruang 6', code: '6' },
    { name: 'Ruang Test', code: 'test' }
]);

watch(selectedRoom, () => {
    clickedArea.value = null;
    console.log(selectedRoom.value)
    if (selectedRoom.value != null) {
        setupMapListener(selectedRoom.value.code)
    }
})

onMounted(() => {
    onAuthStateChanged(auth, async (user) => {
        if (user) {
            await getUserDetails(user.uid);
            uid.value = user.uid;
            if (!isAdmin.value) {
                setupMapListener(ruang.value);
            }
        } else {
            uid.value = null;
        }
    });
});

const getUserDetails = (userId) => {
    return new Promise((resolve, reject) => {
        const userDocRef = doc(db, "users", userId);
        onSnapshot(
            userDocRef,
            (doc) => {
                if (doc.exists()) {
                    const data = doc.data();
                    console.log(data);
                    teamName.value = data.team_name || "";
                    balance.value = data.balance || 0;
                    ruang.value = data.ruang || "";
                    isAdmin.value = data.isAdmin || false;
                    elsi_bal.value = data.elsi_bal;
                    esti_bal.value = data.esti_bal;
                    pisi_bal.value = data.pisi_bal;
                    resolve(); // Resolve the promise when data is fetched
                } else {
                    reject("User document does not exist");
                }
            },
            (error) => {
                console.error("Error fetching document: ", error);
                reject(error);
            }
        );
    });
};


const initializeSvgPanZoom = () => {
    nextTick(() => {
        if (svgMap.value) {
            console.log("Initializing svgPanZoom");
            window.svgPanZoom(svgMap.value, {
                zoomEnabled: true,
                controlIconsEnabled: true,
                fit: true,
                center: true,
                minZoom: 0.5,
                maxZoom: 10,
                eventsListenerElement: svgMap.value.parentNode,
                beforePan: function (oldPan, newPan) {
                    const gutterWidth = 100;
                    const gutterHeight = 100;
                    const sizes = this.getSizes();
                    const leftLimit = -((sizes.viewBox.x + sizes.viewBox.width) * sizes.realZoom) + gutterWidth;
                    const rightLimit = sizes.width - gutterWidth - (sizes.viewBox.x * sizes.realZoom);
                    const topLimit = -((sizes.viewBox.y + sizes.viewBox.height) * sizes.realZoom) + gutterHeight;
                    const bottomLimit = sizes.height - gutterHeight - (sizes.viewBox.y * sizes.realZoom);
                    return {
                        x: Math.max(leftLimit, Math.min(rightLimit, newPan.x)),
                        y: Math.max(topLimit, Math.min(bottomLimit, newPan.y))
                    };
                }
            });
        } else {
            console.error("SVG element not found");
        }
    });
};

// Watch for changes in mapState
watch(mapState, (newValue) => {
    if (newValue && ((!isAdmin.value && mapState.value) || (isAdmin.value && selectedRoom.value && mapState.value))) {
        // Map data has been loaded, initialize svg-pan-zoom
        initializeSvgPanZoom();
    }
});

const updateColor = async (newColor) => {
    const mapDocId = getMapDocId(selectedRoom.value.code);
    try {
        let colorRef = doc(db, "map-state", mapDocId);
        await updateDoc(colorRef, {
            [clickedArea.value]: {
                color: newColor,
                poin_wilayah: mapState.value[clickedArea.value]?.poin_wilayah ?? 0,
                poin_troops: 0,
            }
        })
    }
    catch (e) {
        console.error(e);
    }
}

const freezeArea = () => {
    const mapDocId = getMapDocId(selectedRoom.value.code);
    const poinRef = doc(db, "map-state", mapDocId);
    try {
        // Convert the existing color to RGB
        const currentColor = mapState.value[clickedArea.value].color

        updateDoc(poinRef, {
            [clickedArea.value]: {
                color: increaseAlpha(currentColor, -0.5),
                poin_troops: mapState.value[clickedArea.value]?.poin_troops ?? 0,
                poin_wilayah: mapState.value[clickedArea.value]?.poin_wilayah ?? 0,
            }
        })
    } catch (e) {
        console.error(e);
    }
}

// Helper function to convert hex to RGB
const hexToRgb = (hex) => {
    const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
    return result ? {
        r: parseInt(result[1], 16),
        g: parseInt(result[2], 16),
        b: parseInt(result[3], 16)
    } : null;
}

const unfreezeArea = () => {
    const mapDocId = getMapDocId(selectedRoom.value.code);
    const poinRef = doc(db, "map-state", mapDocId);
    try {

        const currentColor = mapState.value[clickedArea.value].color;

        updateDoc(poinRef, {
            [clickedArea.value]: {
                color: increaseAlpha(currentColor, 0.5),
                poin_troops: mapState.value[clickedArea.value]?.poin_troops ?? 0,
                poin_wilayah: mapState.value[clickedArea.value]?.poin_wilayah ?? 0,
            }
        })
    } catch (e) {
        console.error(e);
    }
}

const increaseAlpha = (rgbaColor, increment) => {
    const rgbaRegex = /rgba\((\d+),\s*(\d+),\s*(\d+),\s*([\d.]+)\)/;
    const match = rgbaColor.match(rgbaRegex);

    if (match) {
        const [, r, g, b, a] = match;
        const newAlpha = Math.min(1, Math.max(0, parseFloat(a) + increment));
        return `rgba(${r}, ${g}, ${b}, ${newAlpha.toFixed(2)})`;
    }

    return rgbaColor;
}

const convertHexToRGBA = (color) => {
    const rgbaRegex = /rgba\((\d+),\s*(\d+),\s*(\d+),\s*([\d.]+)\)/;
    const match = color.match(rgbaRegex);


}

const setWilayahAmount = ref();
const setTroopsAmount = ref();

const clickedArea = ref(null);

watch(clickedArea, () => {
    if (clickedArea.value) {
        setWilayahAmount.value = mapState.value[clickedArea.value].poin_wilayah ?? 0;
        setTroopsAmount.value = mapState.value[clickedArea.value]?.poin_troops ?? 0;
    }
});

const setPoinTroops = () => {
    const mapDocId = getMapDocId(selectedRoom.value.code);
    const poinRef = doc(db, "map-state", mapDocId);
    try {
        updateDoc(poinRef, {
            [clickedArea.value]: {
                poin_troops: setTroopsAmount.value,
                color: mapState.value[clickedArea.value].color,
                poin_wilayah: mapState.value[clickedArea.value]?.poin_wilayah ?? 'err',
            }
        })
    } catch (e) {
        console.error(e);
    }
}

const setPointWilayah = () => {
    const mapDocId = getMapDocId(selectedRoom.value.code);
    const wilayahRef = doc(db, "map-state", mapDocId);
    try {
        updateDoc(wilayahRef, {
            [clickedArea.value]: {
                poin_wilayah: setWilayahAmount.value,
                color: mapState.value[clickedArea.value].color,
                poin_troops: mapState.value[clickedArea.value]?.poin_troops ?? 0,
            }
        })
    } catch (e) {
        console.error(e);
    }
}


const toggleMapFreeze = () => {
    isFrozen.value = !isFrozen.value;
    if (selectedRoom.value) {
        try {
            updateDoc(doc(db, "map-state", getMapDocId(selectedRoom.value.code)), {
                mapFrozen: isFrozen.value
            });
            toast.add({ severity: 'success', summary: 'Success', detail: 'Status Map berhasil diubah', life: 3000 });
        } catch (e) {
            console.error("Error setting map freeze :", e);
            toast.add({ severity: 'error', summary: 'Error', detail: 'Error setting map freeze, contact admin', life: 3000 });
        }
    }
};

const genRandomColor = (idx) => {
    //let colors = ["#01befe", "#ffdd00", "#ff7d00", "#ff006d", "#adff02", "#8f00ff"]; // warna pop
    let colors = [
        "rgba(239, 71, 111, 1)",
        "rgba(247, 140, 107, 1)",
        "rgba(255, 209, 102, 1)",
        "rgba(6, 214, 160, 1)",
        "rgba(17, 138, 178, 1)",
        "rgba(7, 59, 76, 1)"
    ]
        ; // warna pastel
    //let colors = ["#ff595e", "#ff924c", "#ffca3a", "#8ac926", "#1982c4", "#6a4c93"]; // warna pastel pt 2
    //let colors = ["#ff0000", "#ffff00", "#00ff00", "#00ffff", "#0000ff", "#ff00ff"]; // warna contrast
    // let colors = ["grey"];
    if (idx)
        return colors[idx - 1];
    else {
        let randomIndex = Math.floor(Math.random() * colors.length);
        return colors[randomIndex];
    }

    return "white";
}

const getMapDocId = (ruangNo) => {
    switch (ruangNo) {
        case '1':
            return 'd21LqtDO5WcWdGCKJ3N3'
        case '2':
            return 'cuSTlp21z6P3JSyteRY9'
        case '3':
            return 'bg1uK7FvJYo3JX0PKYHn'
        case '4':
            return 'NMloa47dz6vfFP5WYOxf'
        case '5':
            return 'dJ1iBo0aWQPiY5XmPmhT'
        case '6':
            return '3Ac0IRP9ytg9ivcgg0gW'
        case 'test':
            return 'MWSB5KUGrLilOvAOMAuJ'
    }
}

const generateMap = async (ruangNo) => {
    const mapDocId = getMapDocId(ruangNo);
    console.log("setting map ...")
    console.log("mapDocId: ", mapDocId);
    console.log("ruangNo: ", ruangNo);
    try {
        let mapRef = doc(db, "map-state", mapDocId)
        await setDoc(mapRef, {
            ruang: ruangNo,
            A1: {
                color: genRandomColor(1),
                poin_wilayah: 0,
                poin_troops: 0,
            },
            A2: {
                color: genRandomColor(1),
                poin_wilayah: 0,
                poin_troops: 0,
            },
            A3: {
                color: genRandomColor(1),
                poin_wilayah: 0,
                poin_troops: 0,
            },
            A4: {
                color: genRandomColor(1),
                poin_wilayah: 0,
                poin_troops: 0,
            },
            A5: {
                color: genRandomColor(1),
                poin_wilayah: 0,
                poin_troops: 0,
            },
            A6: {
                color: genRandomColor(1),
                poin_wilayah: 0,
                poin_troops: 0,
            },
            A7: {
                color: genRandomColor(1),
                poin_wilayah: 0,
                poin_troops: 0,
            },
            B1: {
                color: genRandomColor(2),
                poin_wilayah: 0,
                poin_troops: 0,
            },
            B2: {
                color: genRandomColor(2),
                poin_wilayah: 0,
                poin_troops: 0,
            },
            B3: {
                color: genRandomColor(2),
                poin_wilayah: 0,
                poin_troops: 0,
            },
            B4: {
                color: genRandomColor(2),
                poin_wilayah: 0,
                poin_troops: 0,
            },
            B5: {
                color: genRandomColor(2),
                poin_wilayah: 0,
                poin_troops: 0,
            },
            B6: {
                color: genRandomColor(2),
                poin_wilayah: 0,
                poin_troops: 0,
            },
            B7: {
                color: genRandomColor(2),
                poin_wilayah: 0,
                poin_troops: 0,
            },
            C1: {
                color: genRandomColor(3),
                poin_wilayah: 0,
                poin_troops: 0,
            },
            C2: {
                color: genRandomColor(3),
                poin_wilayah: 0,
                poin_troops: 0,
            },
            C3: {
                color: genRandomColor(3),
                poin_wilayah: 0,
                poin_troops: 0,
            },
            C4: {
                color: genRandomColor(3),
                poin_wilayah: 0,
                poin_troops: 0,
            },
            C5: {
                color: genRandomColor(3),
                poin_wilayah: 0,
                poin_troops: 0,
            },
            C6: {
                color: genRandomColor(3),
                poin_wilayah: 0,
                poin_troops: 0,
            },
            C7: {
                color: genRandomColor(3),
                poin_wilayah: 0,
                poin_troops: 0,
            },
            D1: {
                color: genRandomColor(4),
                poin_wilayah: 0,
                poin_troops: 0,
            },
            D2: {
                color: genRandomColor(4),
                poin_wilayah: 0,
                poin_troops: 0,
            },
            D3: {
                color: genRandomColor(4),
                poin_wilayah: 0,
                poin_troops: 0,
            },
            D4: {
                color: genRandomColor(4),
                poin_wilayah: 0,
                poin_troops: 0,
            },
            D5: {
                color: genRandomColor(4),
                poin_wilayah: 0,
                poin_troops: 0,
            },
            D6: {
                color: genRandomColor(4),
                poin_wilayah: 0,
                poin_troops: 0,
            },
            D7: {
                color: genRandomColor(4),
                poin_wilayah: 0,
                poin_troops: 0,
            },
            E1: {
                color: genRandomColor(5),
                poin_wilayah: 0,
                poin_troops: 0,
            },
            E2: {
                color: genRandomColor(5),
                poin_wilayah: 0,
                poin_troops: 0,
            },
            E3: {
                color: genRandomColor(5),
                poin_wilayah: 0,
                poin_troops: 0,
            },
            E4: {
                color: genRandomColor(5),
                poin_wilayah: 0,
                poin_troops: 0,
            },
            E5: {
                color: genRandomColor(5),
                poin_wilayah: 0,
                poin_troops: 0,
            },
            E6: {
                color: genRandomColor(5),
                poin_wilayah: 0,
                poin_troops: 0,
            },
            E7: {
                color: genRandomColor(5),
                poin_wilayah: 0,
                poin_troops: 0,
            },
            F1: {
                color: genRandomColor(6),
                poin_wilayah: 0,
                poin_troops: 0,
            },
            F2: {
                color: genRandomColor(6),
                poin_wilayah: 0,
                poin_troops: 0,
            },
            F3: {
                color: genRandomColor(6),
                poin_wilayah: 0,
                poin_troops: 0,
            },
            F4: {
                color: genRandomColor(6),
                poin_wilayah: 0,
                poin_troops: 0,
            },
            F5: {
                color: genRandomColor(6),
                poin_wilayah: 0,
                poin_troops: 0,
            },
            F6: {
                color: genRandomColor(6),
                poin_wilayah: 0,
                poin_troops: 0,
            },
            F7: {
                color: genRandomColor(6),
                poin_wilayah: 0,
                poin_troops: 0,
            },
        });
    } catch (err) {
        console.error("Error adding document: ", err);
    }
}

let D1Fill = 'white'

const debugTarget = ref("");
const debugMap = () => {
    let target = debugTarget.value
    console.log("content of ", target, " is : ", mapState.value[0].state[target]);
    D1Fill.value = mapState.value[0].state[target]
}

let unsubscribeMap;

const setupMapListener = (selected) => {
    const q_map = query(collection(db, "map-state"), where("ruang", "==", selected));

    unsubscribeMap = onSnapshot(q_map, (snapshot) => {
        const data = snapshot.docs.map(doc => doc.data());
        mapState.value = data[0];
        isFrozen.value = mapState.value.mapFrozen;
        console.log("mapState: ", mapState.value);
    });
};

function handleSVGClick(id) {
    if (id) {
        clickedArea.value = id;
        console.log("Selected Area ID: ", id);
    }
}

</script>

<style scoped>
.map-area:hover {
    filter: brightness(0.8);
}

.colorbtn {
    border: 1px solid black;
    color: white;
    padding: 10px 10px;
    text-align: center;
    text-decoration: none;
    display: block;
    font-size: 16px;
    margin: 4px 2px;
    cursor: pointer;
    border-radius: 20%;
}

.colorbtn:hover {
    filter: brightness(0.8) !important;
}

.A {
    background-color: #EF476F;
}

.B {
    background-color: #f78c6b;
}

.C {
    background-color: #ffd166;
}

.D {
    background-color: #06d6a0;
}

.E {
    background-color: #118ab2;
}

.F {
    background-color: #073b4c;
}

.map-container {
    touch-action: none;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}

.freeze {
    background-color: rgba(213, 182, 198, 0.46);
}
</style>